{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaushikieee/Downloads/code/components/peep/live-map.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState } from 'react';\nimport maplibregl, { type Map as MaplibreMap } from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\n\ninterface MapPin {\n  id: number;\n  lat: number;\n  lng: number;\n  category: string;\n  severity: 'Low' | 'Medium' | 'High';\n  note?: string;\n}\n\nconst severityColors = {\n  Low: '#16a34a',\n  Medium: '#f59e0b',\n  High: '#ef4444',\n};\n\ninterface LiveMapProps {\n  pins: MapPin[];\n  onPinClick?: (pin: MapPin) => void;\n}\n\nexport default function LiveMap({ pins, onPinClick }: LiveMapProps) {\n  const mapContainer = useRef<HTMLDivElement>(null);\n  const map = useRef<MaplibreMap | null>(null);\n  const [userLocation, setUserLocation] = useState<[number, number] | null>(null);\n\n  // Initialize map\n  useEffect(() => {\n    if (!mapContainer.current) return;\n    \n    console.log('[LiveMap] Initializing Maplibre GL');\n\n    try {\n      // Check for WebGL support\n      const canvas = document.createElement('canvas');\n      const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n      if (!gl) {\n        console.error('[LiveMap] WebGL not supported');\n      }\n\n      const mapInstance = new maplibregl.Map({\n        container: mapContainer.current,\n        style: {\n          version: 8,\n          sources: {\n            'osm': {\n              type: 'raster',\n              tiles: ['https://tile.openstreetmap.org/{z}/{x}/{y}.png'],\n              tileSize: 256,\n              attribution: '© OpenStreetMap contributors'\n            }\n          },\n          layers: [\n            {\n              id: 'osm',\n              type: 'raster',\n              source: 'osm',\n              minzoom: 0,\n              maxzoom: 19\n            }\n          ]\n        },\n        center: [77.0269, 11.0420],\n        zoom: 13,\n      });\n\n      mapInstance.on('load', () => {\n        console.log('[LiveMap] Map loaded successfully');\n        map.current = mapInstance;\n      });\n\n      mapInstance.on('error', (e: any) => {\n        console.error('[LiveMap] Map error event:', {\n          message: e?.message,\n          type: e?.type,\n          error: e?.error,\n        });\n      });\n\n      mapInstance.on('style.load', () => {\n        console.log('[LiveMap] Style loaded');\n      });\n\n      return () => {\n        if (map.current) {\n          try {\n            map.current.remove();\n          } catch (e) {\n            console.error('[LiveMap] Error removing map:', e);\n          }\n          map.current = null;\n        }\n      };\n    } catch (err) {\n      console.error('[LiveMap] Error creating map:', err);\n      if (err instanceof Error) {\n        console.error('[LiveMap] Error details:', err.message);\n      }\n    }\n  }, []);\n\n  // Add markers when pins change\n  useEffect(() => {\n    if (!map.current) return;\n\n    console.log('[LiveMap] Adding', pins.length, 'markers');\n\n    // Remove existing markers\n    const existingMarkers = document.querySelectorAll('.pin-marker');\n    existingMarkers.forEach(marker => marker.remove());\n\n    // Add new markers\n    pins.forEach((pin) => {\n      // Create marker element\n      const markerEl = document.createElement('div');\n      markerEl.className = 'pin-marker';\n      markerEl.style.cssText = `\n        width: 32px;\n        height: 32px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 24px;\n        cursor: pointer;\n      `;\n      // Use emoji based on severity\n      const severityEmojis = {\n        Low: '❗',\n        Medium: '❗️❗️',\n        High: '⚠️',\n      };\n      markerEl.textContent = severityEmojis[pin.severity];\n      // Adjust letter spacing for medium severity to reduce gap\n      if (pin.severity === 'Medium') {\n        markerEl.style.letterSpacing = '-0.3em';\n        markerEl.style.fontSize = '20px';\n      }\n\n      // Create marker (without popup - use card instead)\n      const marker = new maplibregl.Marker({ element: markerEl })\n        .setLngLat([pin.lng, pin.lat])\n        .addTo(map.current!);\n\n      // Add click handler to show card\n      markerEl.addEventListener('click', () => {\n        onPinClick?.(pin);\n      });\n    });\n  }, [pins, onPinClick]);\n\n  // Get user location and center map on it, fallback to mock data center\n  useEffect(() => {\n    const centerMapOnLocation = (lng: number, lat: number) => {\n      if (map.current) {\n        map.current.flyTo({\n          center: [lng, lat],\n          zoom: 15,\n          duration: 1500,\n        });\n      }\n    };\n\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const loc: [number, number] = [position.coords.longitude, position.coords.latitude];\n          setUserLocation(loc);\n          console.log('[LiveMap] Got user location:', loc);\n          centerMapOnLocation(loc[0], loc[1]);\n        },\n        (error) => {\n          console.log('[LiveMap] Geolocation error:', error.code, '- Using fallback location');\n          // Fallback to mock data center point (11.0420, 77.0269)\n          centerMapOnLocation(77.0269, 11.0420);\n        },\n        { timeout: 5000, maximumAge: 3600000 }\n      );\n    } else {\n      console.log('[LiveMap] Geolocation not available - Using fallback location');\n      // Fallback to mock data center point\n      centerMapOnLocation(77.0269, 11.0420);\n    }\n  }, []);\n\n  // Add user location marker\n  useEffect(() => {\n    if (!map.current || !userLocation) return;\n\n    const userMarkerEl = document.createElement('div');\n    userMarkerEl.style.cssText = `\n      background-color: #3b82f6;\n      border: 3px solid white;\n      border-radius: 50%;\n      width: 24px;\n      height: 24px;\n      box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n    `;\n\n    new maplibregl.Marker({ element: userMarkerEl })\n      .setLngLat(userLocation)\n      .addTo(map.current);\n  }, [userLocation]);\n\n  return (\n    <div className=\"relative w-full h-full overflow-hidden bg-gray-100\">\n      <div\n        ref={mapContainer}\n        className=\"w-full h-full\"\n        style={{ width: '100%', height: '100%' }}\n      />\n\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaushikieee/Downloads/code/lib/fuzzy-search.ts"],"sourcesContent":["export function fuzzySearch<T extends { name: string; [key: string]: any }>(query: string, items: T[]): T[] {\n  if (!query.trim()) return items;\n  \n  const lowerQuery = query.toLowerCase();\n  \n  return items\n    .filter(item => item.name.toLowerCase().includes(lowerQuery))\n    .sort((a, b) => {\n      const aPos = a.name.toLowerCase().indexOf(lowerQuery);\n      const bPos = b.name.toLowerCase().indexOf(lowerQuery);\n      return aPos - bPos;\n    })\n    .slice(0, 5);\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS,YAA4D,KAAa,EAAE,KAAU;IACnG,IAAI,CAAC,MAAM,IAAI,IAAI,OAAO;IAE1B,MAAM,aAAa,MAAM,WAAW;IAEpC,OAAO,MACJ,MAAM,CAAC,CAAA,OAAQ,KAAK,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,aAChD,IAAI,CAAC,CAAC,GAAG;QACR,MAAM,OAAO,EAAE,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC;QAC1C,MAAM,OAAO,EAAE,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC;QAC1C,OAAO,OAAO;IAChB,GACC,KAAK,CAAC,GAAG;AACd"}},
    {"offset": {"line": 242, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaushikieee/Downloads/code/app/peep/user/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { MapPin, AlertCircle, ChevronUp, Loader2, Check, Share2, Eye, Menu, User } from 'lucide-react';\nimport Link from 'next/link';\nimport LiveMap from '@/components/peep/live-map';\nimport { fuzzySearch } from '@/lib/fuzzy-search';\n\ninterface Report {\n  id: number;\n  lat: number;\n  lng: number;\n  category: string;\n  severity: 'Low' | 'Medium' | 'High';\n  note: string;\n  reporter: string;\n  date: string;\n  zone: string;\n  upvotes: number;\n  verified: boolean;\n  imagePlaceholder: string;\n}\n\ninterface POI {\n  name: string;\n  lat: number;\n  lng: number;\n  zone: string;\n}\n\ntype ReportingStep = 'location' | 'details' | 'impact' | 'success';\n\nconst MOCK_REPORTS: Report[] = [];\n\nconst MOCK_POIS: POI[] = [\n  { name: 'School Gate', lat: 12.9716, lng: 77.5946, zone: 'Zone P1' },\n  { name: 'Park North', lat: 12.9740, lng: 77.5955, zone: 'Zone W2' },\n  { name: 'Sports Field', lat: 12.9705, lng: 77.5935, zone: 'Zone P2' },\n  { name: 'Drainage Area', lat: 12.9719, lng: 77.5950, zone: 'Zone P1' },\n  { name: 'Construction Site', lat: 12.9715, lng: 77.5965, zone: 'Zone C3' },\n  { name: 'Residential Corner', lat: 12.9710, lng: 77.5920, zone: 'Zone W3' },\n  { name: 'Industrial Zone', lat: 12.9745, lng: 77.5945, zone: 'Zone S1' },\n  { name: 'Local Market', lat: 12.9695, lng: 77.5955, zone: 'Zone P3' },\n  { name: 'Park South', lat: 12.9735, lng: 77.5930, zone: 'Zone O1' },\n  { name: 'Walking Trail', lat: 12.9725, lng: 77.5938, zone: 'Zone C2' },\n];\n\nexport default function MapPage() {\n  // Map & location state\n  const [reports, setReports] = useState<Report[]>([]);\n  const [pois, setPois] = useState<POI[]>(MOCK_POIS);\n  const [userLocation, setUserLocation] = useState<{ lat: number; lng: number } | null>(null);\n  const [geoError, setGeoError] = useState<string | null>(null);\n  const [selectedPin, setSelectedPin] = useState<Report | null>(null);\n\n  // Reporting state\n  const [showReportSheet, setShowReportSheet] = useState(false);\n  const [reportStep, setReportStep] = useState<ReportingStep>('location');\n  const [showProfileMenu, setShowProfileMenu] = useState(false);\n  \n  // Step 1: Location\n  const [selectedLocation, setSelectedLocation] = useState<{ lat: number; lng: number; label: string } | null>(null);\n  const [locationSearch, setLocationSearch] = useState('');\n  const [searchResults, setSearchResults] = useState<POI[]>([]);\n  \n  // Step 2: Details\n  const [reportTitle, setReportTitle] = useState('');\n  const [reportDescription, setReportDescription] = useState('');\n  const [reportCategory, setReportCategory] = useState('');\n  const [reportSeverity, setReportSeverity] = useState<'Low' | 'Medium' | 'High'>('Medium');\n  const [photoFile, setPhotoFile] = useState<File | null>(null);\n  const [scrubExif, setScrubExif] = useState(true);\n  \n  // Step 3: Impact\n  const [impacts, setImpacts] = useState<string[]>([]);\n  const [affectedPeople, setAffectedPeople] = useState('');\n  const [sharePublicly, setSharePublicly] = useState(true);\n  \n  // Success\n  const [newCaseId, setNewCaseId] = useState<number | null>(null);\n\n  // Load data from API\n  useEffect(() => {\n    console.log('[MapPage] Fetching reports from API...');\n    fetch('/api/data/reports')\n      .then(r => r.json())\n      .then(reportsData => {\n        console.log('[MapPage] Loaded reports:', reportsData.length);\n        // Map the data to include imagePlaceholder from images array\n        const mappedData = reportsData.map((report: any) => ({\n          ...report,\n          imagePlaceholder: report.images && report.images[0] ? report.images[0] : '/data/mock-reports.json'\n        }));\n        setReports(mappedData);\n      })\n      .catch(err => console.error('[MapPage] Failed to load data:', err));\n  }, []);\n\n  // Get user location\n  useEffect(() => {\n    if ('geolocation' in navigator) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const loc = { lat: position.coords.latitude, lng: position.coords.longitude };\n          setUserLocation(loc);\n          setSelectedLocation({ ...loc, label: 'Current Location' });\n        },\n        (err) => {\n          setGeoError(\"Can't access your location. Type a place name or drag the pin.\");\n        }\n      );\n    }\n  }, []);\n\n  // Handle location search\n  useEffect(() => {\n    if (locationSearch.trim()) {\n      const results = fuzzySearch(locationSearch, pois);\n      setSearchResults(results);\n    } else {\n      setSearchResults([]);\n    }\n  }, [locationSearch, pois]);\n\n  // Step 1 validation\n  const step1Valid = selectedLocation !== null;\n\n  // Step 2 validation\n  const step2Valid = reportTitle.trim().length >= 5 && reportDescription.trim().length > 0 && reportCategory && photoFile !== null;\n\n  // Step 3 validation\n  const step3Valid = true; // Impacts and affected people are optional\n\n  // Handle impact toggle\n  const toggleImpact = (impact: string) => {\n    setImpacts(prev => prev.includes(impact) ? prev.filter(i => i !== impact) : [...prev, impact]);\n  };\n\n  // Handle submit\n  const handleSubmit = () => {\n    // Generate next case ID from max existing + 1\n    const nextId = Math.max(...reports.map(r => r.id), 100) + 1;\n    setNewCaseId(nextId);\n    setReportStep('success');\n    \n    // In real app, would save to backend here\n    console.log('[v0] Report submitted:', {\n      caseId: nextId,\n      title: reportTitle,\n      location: selectedLocation,\n      category: reportCategory,\n      severity: reportSeverity,\n      impacts,\n      affectedPeople,\n      sharePublicly\n    });\n  };\n\n  return (\n    <div className=\"fixed top-0 left-0 right-0 bottom-0 bg-white flex flex-col\">\n      {/* Header */}\n      <div className=\"z-30 bg-white border-b border-gray-200 px-4 py-3 flex-shrink-0\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-xl font-bold text-balance\" style={{ color: 'var(--peep-primary)' }}>\n              <span className=\"sr-only\">PEEP - </span>Pollution Map\n            </h1>\n            <p className=\"text-xs text-gray-600 mt-1\">View reports near you • No reports nearby? Be the first to PEEP!</p>\n          </div>\n          <div className=\"relative\">\n            <button\n              onClick={() => setShowProfileMenu(!showProfileMenu)}\n              className=\"p-2 hover:bg-gray-100 rounded-lg transition-all\"\n              aria-label=\"Profile menu\"\n            >\n              <User className=\"w-6 h-6 text-gray-700\" />\n            </button>\n            {showProfileMenu && (\n              <div className=\"absolute right-0 mt-1 bg-white rounded-lg border border-gray-200 shadow-lg p-3 min-w-max z-50\">\n                <div className=\"flex items-center gap-2 mb-3\">\n                  <div className=\"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center\">\n                    <User className=\"w-6 h-6 text-blue-600\" />\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-semibold text-gray-900\">Pragadeesh</p>\n                    <p className=\"text-xs text-gray-600\">Local Reporter</p>\n                  </div>\n                </div>\n                <hr className=\"my-2\" />\n                <Link href=\"/peep/user/profile\" className=\"block px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded\">\n                  My Reports\n                </Link>\n                <button className=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded\">\n                  Settings\n                </button>\n                <button className=\"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded\">\n                  Logout\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Map Area - absolute positioning to fill remaining space */}\n      <div className=\"absolute top-14 left-0 right-0 bottom-0\">\n        <LiveMap\n          pins={reports.map((r) => ({\n            id: r.id,\n            lat: r.lat,\n            lng: r.lng,\n            category: r.category,\n            severity: r.severity,\n            note: r.note,\n          }))}\n          onPinClick={(pin) => {\n            const report = reports.find((r) => r.id === pin.id);\n            setSelectedPin(report || null);\n          }}\n        />\n\n        {/* Selected Report Card */}\n        {selectedPin && (\n          <div className=\"absolute bottom-20 left-4 right-4 bg-white rounded-lg border border-gray-200 shadow-lg overflow-hidden max-w-sm z-50\">\n            {/* Image */}\n            <div className=\"w-full h-48 bg-gradient-to-br from-gray-200 to-gray-300 overflow-hidden flex items-center justify-center\">\n              {selectedPin.imagePlaceholder ? (\n                <img \n                  src={selectedPin.imagePlaceholder} \n                  alt={selectedPin.category}\n                  className=\"w-full h-full object-cover\"\n                  onError={(e) => {\n                    // Fallback to gray background if image fails to load\n                    e.currentTarget.style.display = 'none';\n                  }}\n                />\n              ) : (\n                <div className=\"flex flex-col items-center justify-center text-gray-400\">\n                  <AlertCircle className=\"w-8 h-8 mb-2\" />\n                  <p className=\"text-xs\">No image</p>\n                </div>\n              )}\n            </div>\n            \n            {/* Content */}\n            <div className=\"p-4\">\n              <div className=\"flex items-start justify-between gap-2 mb-2\">\n                <h3 className=\"text-sm font-bold\">Case #{selectedPin.id}</h3>\n                <button onClick={() => setSelectedPin(null)} className=\"text-gray-400 hover:text-gray-600\">✕</button>\n              </div>\n              <p className=\"text-xs text-gray-600 mb-1\">{selectedPin.category}</p>\n              <p className=\"text-sm text-gray-700 mb-3\">{selectedPin.note}</p>\n              <div className=\"flex gap-2\">\n                <span className=\"px-2 py-1 rounded text-xs font-bold\" style={{\n                  backgroundColor: selectedPin.severity === 'High' ? '#fca5a5' : selectedPin.severity === 'Medium' ? '#fcd34d' : '#c6f6d5',\n                  color: selectedPin.severity === 'High' ? '#7f1d1d' : selectedPin.severity === 'Medium' ? '#78350f' : '#15803d',\n                }}>\n                  {selectedPin.severity}\n                </span>\n                <span className=\"text-xs text-gray-500\">By {selectedPin.reporter}</span>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Start Report Button - Fixed at bottom */}\n      <div className={`fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-3 z-40 transition-all duration-300 ${showReportSheet ? 'translate-y-full' : 'translate-y-0'}`}>\n        <Link\n          href=\"/peep/user/new-report\"\n          className=\"w-full py-3 px-6 rounded-2xl font-bold text-white shadow-lg transition-all active:scale-95 block text-center\"\n          style={{ backgroundColor: 'var(--peep-primary)' }}\n        >\n          Start Report\n        </Link>\n      </div>\n\n      {/* Reporting Sheet */}\n      <div className={`fixed bottom-0 left-0 right-0 top-0 bg-white border-t border-gray-200 rounded-t-2xl transition-all duration-300 z-[9999] max-h-screen overflow-y-auto ${\n        showReportSheet ? 'translate-y-0' : 'translate-y-full'\n      }`}>\n        {/* Sheet Handle */}\n        <div className=\"sticky top-0 bg-white px-4 py-3 border-b border-gray-200 flex items-center justify-between\">\n          <div className=\"flex-1 text-center\">\n            <div className=\"text-xs font-bold text-gray-500 tracking-wide\">\n              STEP {reportStep === 'location' ? '1' : reportStep === 'details' ? '2' : reportStep === 'impact' ? '3' : '✓'} OF 3\n            </div>\n          </div>\n          <button\n            onClick={() => {\n              if (reportStep === 'location') setShowReportSheet(false);\n              else setReportStep(reportStep === 'details' ? 'location' : reportStep === 'impact' ? 'details' : 'impact');\n            }}\n            className=\"p-1 hover:bg-gray-100 rounded-lg\"\n            aria-label=\"Collapse sheet\"\n          >\n            <ChevronUp className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"px-4 pt-4\">\n          <div className=\"flex gap-2\">\n            {(['location', 'details', 'impact'] as const).map((step, idx) => (\n              <div key={step} className=\"flex-1 h-1 rounded-full\" style={{\n                backgroundColor: \n                  step === 'location' ? (reportStep === 'location' || reportStep === 'details' || reportStep === 'impact' ? 'var(--peep-primary)' : '#ddd') :\n                  step === 'details' ? (reportStep === 'details' || reportStep === 'impact' ? 'var(--peep-primary)' : '#ddd') :\n                  reportStep === 'impact' ? 'var(--peep-primary)' : '#ddd'\n              }} />\n            ))}\n          </div>\n        </div>\n\n        <div className=\"p-4 pb-8\">\n          {reportStep === 'success' ? (\n            <div className=\"text-center space-y-4\">\n              <div className=\"w-16 h-16 rounded-full flex items-center justify-center mx-auto bg-green-100\">\n                <Check className=\"w-8 h-8 text-green-600\" />\n              </div>\n              <h2 className=\"text-xl font-bold text-gray-900\">Report Submitted</h2>\n              <p className=\"text-sm text-gray-600\">Case #{newCaseId}</p>\n              <div className=\"flex gap-2 pt-4\">\n                <button\n                  onClick={() => {\n                    setShowReportSheet(false);\n                    setReportStep('location');\n                    setReportTitle('');\n                    setReportDescription('');\n                    setReportCategory('');\n                    setImpacts([]);\n                  }}\n                  className=\"flex-1 py-3 px-4 rounded-lg font-semibold text-white transition-all active:scale-95\"\n                  style={{ backgroundColor: 'var(--peep-primary)' }}\n                >\n                  <Share2 className=\"w-4 h-4 inline mr-2\" />\n                  Share\n                </button>\n              </div>\n            </div>\n          ) : reportStep === 'location' ? (\n            <div className=\"space-y-4\">\n              <div>\n                <h3 className=\"font-bold text-gray-900 mb-3\">Step 1: Choose Location</h3>\n                \n                {geoError && (\n                  <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-3 flex gap-2\">\n                    <AlertCircle className=\"w-5 h-5 text-yellow-600 flex-shrink-0\" />\n                    <p className=\"text-sm text-yellow-800\">{geoError}</p>\n                  </div>\n                )}\n\n                {userLocation && (\n                  <button\n                    onClick={() => setSelectedLocation({ ...userLocation, label: 'Current Location' })}\n                    className=\"w-full p-3 border-2 rounded-lg text-left transition-all mb-3\"\n                    style={{\n                      borderColor: selectedLocation?.label === 'Current Location' ? 'var(--peep-primary)' : '#ddd',\n                      backgroundColor: selectedLocation?.label === 'Current Location' ? 'rgba(0, 128, 96, 0.05)' : 'transparent'\n                    }}\n                  >\n                    <p className=\"font-medium text-sm text-gray-900\">Use My Current Location</p>\n                    <p className=\"text-xs text-gray-600 mt-1\">Lat: {userLocation.lat.toFixed(4)}, Lng: {userLocation.lng.toFixed(4)}</p>\n                  </button>\n                )}\n\n                <div className=\"relative\">\n                  <input\n                    type=\"text\"\n                    placeholder=\"Type location name or street\"\n                    value={locationSearch}\n                    onChange={(e) => setLocationSearch(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2\"\n                    style={{ outlineColor: 'var(--peep-primary)' }}\n                    aria-label=\"Search for location\"\n                  />\n                  {searchResults.length > 0 && (\n                    <div className=\"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-50\">\n                      {searchResults.map((poi) => (\n                        <button\n                          key={`${poi.lat}-${poi.lng}`}\n                          onClick={() => {\n                            setSelectedLocation({ lat: poi.lat, lng: poi.lng, label: poi.name });\n                            setLocationSearch('');\n                            setSearchResults([]);\n                          }}\n                          className=\"w-full text-left px-3 py-2 hover:bg-gray-50 text-sm border-b border-gray-100 last:border-0\"\n                        >\n                          <p className=\"font-medium text-gray-900\">{poi.name}</p>\n                          <p className=\"text-xs text-gray-600\">{poi.zone}</p>\n                        </button>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {selectedLocation && (\n                <div className=\"bg-gray-50 rounded-lg p-3\">\n                  <p className=\"text-xs font-bold text-gray-600 uppercase tracking-wide\">Selected Location</p>\n                  <p className=\"text-sm font-medium text-gray-900 mt-1\">{selectedLocation.label}</p>\n                  <p className=\"text-xs text-gray-600\">Lat: {selectedLocation.lat.toFixed(4)}, Lng: {selectedLocation.lng.toFixed(4)}</p>\n                </div>\n              )}\n\n              <p className=\"text-xs text-gray-600 text-center\">Location is required so authorities can find the spot.</p>\n\n              <button\n                onClick={() => step1Valid && setReportStep('details')}\n                disabled={!step1Valid}\n                className=\"w-full py-3 px-4 rounded-lg font-semibold text-white transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed\"\n                style={{ backgroundColor: 'var(--peep-primary)' }}\n              >\n                Next: Add Details\n              </button>\n            </div>\n          ) : reportStep === 'details' ? (\n            <div className=\"space-y-4\">\n              <h3 className=\"font-bold text-gray-900\">Step 2: Title, Description & Category</h3>\n\n              <div>\n                <label className=\"text-sm font-medium text-gray-900\">Clear Title *</label>\n                <input\n                  type=\"text\"\n                  placeholder=\"e.g., Blackish runoff behind school gate\"\n                  value={reportTitle}\n                  onChange={(e) => setReportTitle(e.target.value)}\n                  maxLength={100}\n                  className=\"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2\"\n                  aria-label=\"Report title\"\n                />\n                <p className=\"text-xs text-gray-600 mt-1\">{reportTitle.length}/100 characters</p>\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium text-gray-900\">Description *</label>\n                <textarea\n                  placeholder=\"Describe what you see in one line. Add detail about when you saw it, how often, who is affected.\"\n                  value={reportDescription}\n                  onChange={(e) => setReportDescription(e.target.value)}\n                  maxLength={500}\n                  rows={3}\n                  className=\"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2\"\n                  aria-label=\"Report description\"\n                />\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium text-gray-900\">Category *</label>\n                <select\n                  value={reportCategory}\n                  onChange={(e) => setReportCategory(e.target.value)}\n                  className=\"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2\"\n                  aria-label=\"Problem category\"\n                >\n                  <option value=\"\">Select category...</option>\n                  <option value=\"Soil contamination\">Soil contamination</option>\n                  <option value=\"Stagnant water\">Stagnant water</option>\n                  <option value=\"Plastic / microplastics\">Plastic / microplastics</option>\n                  <option value=\"Damaged turf / turf runoff\">Damaged turf / turf runoff</option>\n                  <option value=\"Waste dumping\">Waste dumping</option>\n                  <option value=\"Other\">Other</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium text-gray-900 block mb-3\">How bad is it? *</label>\n                <div className=\"flex gap-2\">\n                  {(['Low', 'Medium', 'High'] as const).map((sev) => (\n                    <button\n                      key={sev}\n                      onClick={() => setReportSeverity(sev)}\n                      className=\"flex-1 py-2 px-3 rounded-lg font-semibold text-sm transition-all\"\n                      style={{\n                        backgroundColor: reportSeverity === sev ? \n                          (sev === 'High' ? '#ef4444' : sev === 'Medium' ? '#eab308' : '#22c55e') :\n                          '#f3f4f6',\n                        color: reportSeverity === sev ? 'white' : '#666'\n                      }}\n                    >\n                      {sev}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium text-gray-900 block mb-2\">Attach Photo *</label>\n                <div className=\"flex gap-2\">\n                  <label className=\"flex-1 px-3 py-2 border-2 border-dashed border-gray-300 rounded-lg text-center cursor-pointer hover:border-gray-400 transition-all\">\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={(e) => setPhotoFile(e.target.files?.[0] || null)}\n                      className=\"hidden\"\n                      aria-label=\"Upload photo from gallery\"\n                    />\n                    <p className=\"text-sm text-gray-600\">{photoFile ? '✓ Photo selected' : 'Gallery'}</p>\n                  </label>\n                  <label className=\"flex-1 px-3 py-2 border-2 border-dashed border-gray-300 rounded-lg text-center cursor-pointer hover:border-gray-400 transition-all\">\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      capture=\"environment\"\n                      onChange={(e) => setPhotoFile(e.target.files?.[0] || null)}\n                      className=\"hidden\"\n                      aria-label=\"Take photo with camera\"\n                    />\n                    <p className=\"text-sm text-gray-600\">Camera</p>\n                  </label>\n                </div>\n              </div>\n\n              <div>\n                <button\n                  onClick={() => setReportStep('location')}\n                  className=\"flex-1 py-2 px-4 rounded-lg font-medium border border-gray-300 text-gray-700 hover:bg-gray-50\"\n                >\n                  Back\n                </button>\n                <button\n                  onClick={() => step2Valid && setReportStep('impact')}\n                  disabled={!step2Valid}\n                  className=\"flex-1 py-2 px-4 rounded-lg font-medium text-white transition-all active:scale-95 disabled:opacity-50\"\n                  style={{ backgroundColor: 'var(--peep-primary)' }}\n                >\n                  Next: Impact\n                </button>\n              </div>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              <h3 className=\"font-bold text-gray-900\">Step 3: Who's Affected?</h3>\n\n              <div>\n                <p className=\"text-sm font-medium text-gray-900 mb-2\">How could this affect people?</p>\n                <div className=\"space-y-2\">\n                  {[\n                    { id: 'health', label: 'Health (respiratory / skin)', hint: 'Respiratory or skin irritation risk' },\n                    { id: 'mosquito', label: 'Mosquito / vector risk', hint: 'Breeding ground for disease vectors' },\n                    { id: 'safety', label: 'Safety (slippery surfaces)', hint: 'Risk of falls or accidents' },\n                    { id: 'kids', label: 'Play & sports risk for kids', hint: 'Children playing nearby' },\n                    { id: 'water', label: 'Contaminated water source', hint: 'Downstream water pollution' },\n                  ].map(option => (\n                    <label key={option.id} className=\"flex items-start gap-2 p-2 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50\">\n                      <input\n                        type=\"checkbox\"\n                        checked={impacts.includes(option.id)}\n                        onChange={() => toggleImpact(option.id)}\n                        className=\"mt-1 w-4 h-4\"\n                      />\n                      <div className=\"flex-1\">\n                        <p className=\"text-sm font-medium text-gray-900\">{option.label}</p>\n                        <p className=\"text-xs text-gray-600\">{option.hint}</p>\n                      </div>\n                    </label>\n                  ))}\n                </div>\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium text-gray-900 block mb-2\">Who is affected?</label>\n                <select\n                  value={affectedPeople}\n                  onChange={(e) => setAffectedPeople(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2\"\n                >\n                  <option value=\"\">Choose...</option>\n                  <option value=\"Children\">Children</option>\n                  <option value=\"Residents\">Residents</option>\n                  <option value=\"Athletes\">Athletes</option>\n                  <option value=\"Everyone\">Everyone</option>\n                  <option value=\"Not sure\">Not sure</option>\n                </select>\n              </div>\n\n              <label className=\"flex items-start gap-2 p-2 border border-gray-200 rounded-lg\">\n                <input\n                  type=\"checkbox\"\n                  checked={sharePublicly}\n                  onChange={(e) => setSharePublicly(e.target.checked)}\n                  className=\"mt-1 w-4 h-4\"\n                />\n                <div>\n                  <p className=\"text-sm font-medium text-gray-900\">Share photo publicly</p>\n                  <p className=\"text-xs text-gray-600\">Make your photo visible to others viewing this report.</p>\n                </div>\n              </label>\n\n              <div className=\"flex gap-2 pt-2\">\n                <button\n                  onClick={() => setReportStep('details')}\n                  className=\"flex-1 py-2 px-4 rounded-lg font-medium border border-gray-300 text-gray-700 hover:bg-gray-50\"\n                >\n                  Back\n                </button>\n                <button\n                  onClick={handleSubmit}\n                  className=\"flex-1 py-3 px-4 rounded-lg font-semibold text-white transition-all active:scale-95\"\n                  style={{ backgroundColor: 'var(--peep-primary)' }}\n                >\n                  Submit Report\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}