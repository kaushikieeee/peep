{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaushikieee/Downloads/code/components/admin/sidebar.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport {\n  LayoutDashboard,\n  FileText,\n  MapPin,\n  Share2,\n  Store,\n  Settings,\n  X,\n} from 'lucide-react';\n\ninterface AdminSidebarProps {\n  open: boolean;\n  onClose: () => void;\n}\n\nconst menuItems = [\n  { href: '/admin/dashboard', label: 'Dashboard', icon: LayoutDashboard },\n  { href: '/admin/evidence', label: 'Evidence Management', icon: FileText },\n  { href: '/admin/zones', label: 'Zone Editor', icon: MapPin },\n  { href: '/admin/forwarding', label: 'Authority Forwarding', icon: Share2 },\n  { href: '/admin/marketplace', label: 'Service Marketplace', icon: Store },\n  { href: '/admin/settings', label: 'Settings', icon: Settings },\n];\n\nexport default function AdminSidebar({ open, onClose }: AdminSidebarProps) {\n  const pathname = usePathname();\n\n  return (\n    <>\n      {/* Overlay for mobile */}\n      {open && (\n        <div\n          className=\"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden\"\n          onClick={onClose}\n        />\n      )}\n\n      {/* Sidebar */}\n      <div\n        className={`fixed lg:relative w-64 h-screen bg-gray-900 text-white transition-all z-40 ${\n          open ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'\n        }`}\n      >\n        {/* Logo */}\n        <div className=\"p-6 border-b border-gray-800\">\n          <div className=\"flex items-center justify-between\">\n            <Link href=\"/admin/dashboard\" className=\"text-2xl font-bold\">\n              PEEP\n            </Link>\n            <button onClick={onClose} className=\"lg:hidden p-1 hover:bg-gray-800 rounded\">\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n          <p className=\"text-xs text-gray-400 mt-2\">Admin Portal</p>\n        </div>\n\n        {/* Navigation Menu */}\n        <nav className=\"p-4 space-y-2\">\n          {menuItems.map((item) => {\n            const Icon = item.icon;\n            const isActive = pathname.startsWith(item.href);\n\n            return (\n              <Link\n                key={item.href}\n                href={item.href}\n                onClick={onClose}\n                className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${\n                  isActive\n                    ? 'bg-blue-600 text-white'\n                    : 'text-gray-400 hover:bg-gray-800 hover:text-white'\n                }`}\n              >\n                <Icon className=\"w-5 h-5\" />\n                <span className=\"text-sm font-medium\">{item.label}</span>\n              </Link>\n            );\n          })}\n        </nav>\n\n        {/* Footer */}\n        <div className=\"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-800\">\n          <p className=\"text-xs text-gray-500 text-center\">\n            PEEP Admin v1.0\n          </p>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;;;;;AAmBA,MAAM,YAAY;IAChB;QAAE,MAAM;QAAoB,OAAO;QAAa,MAAM,wVAAe;IAAC;IACtE;QAAE,MAAM;QAAmB,OAAO;QAAuB,MAAM,mUAAQ;IAAC;IACxE;QAAE,MAAM;QAAgB,OAAO;QAAe,MAAM,6TAAM;IAAC;IAC3D;QAAE,MAAM;QAAqB,OAAO;QAAwB,MAAM,6TAAM;IAAC;IACzE;QAAE,MAAM;QAAsB,OAAO;QAAuB,MAAM,sTAAK;IAAC;IACxE;QAAE,MAAM;QAAmB,OAAO;QAAY,MAAM,+TAAQ;IAAC;CAC9D;AAEc,SAAS,aAAa,EAAE,IAAI,EAAE,OAAO,EAAqB;IACvE,MAAM,WAAW,IAAA,qSAAW;IAE5B,qBACE;;YAEG,sBACC,kYAAC;gBACC,WAAU;gBACV,SAAS;;;;;;0BAKb,kYAAC;gBACC,WAAW,CAAC,2EAA2E,EACrF,OAAO,kBAAkB,sCACzB;;kCAGF,kYAAC;wBAAI,WAAU;;0CACb,kYAAC;gCAAI,WAAU;;kDACb,kYAAC,2TAAI;wCAAC,MAAK;wCAAmB,WAAU;kDAAqB;;;;;;kDAG7D,kYAAC;wCAAO,SAAS;wCAAS,WAAU;kDAClC,cAAA,kYAAC,0SAAC;4CAAC,WAAU;;;;;;;;;;;;;;;;;0CAGjB,kYAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;kCAI5C,kYAAC;wBAAI,WAAU;kCACZ,UAAU,GAAG,CAAC,CAAC;4BACd,MAAM,OAAO,KAAK,IAAI;4BACtB,MAAM,WAAW,SAAS,UAAU,CAAC,KAAK,IAAI;4BAE9C,qBACE,kYAAC,2TAAI;gCAEH,MAAM,KAAK,IAAI;gCACf,SAAS;gCACT,WAAW,CAAC,4DAA4D,EACtE,WACI,2BACA,oDACJ;;kDAEF,kYAAC;wCAAK,WAAU;;;;;;kDAChB,kYAAC;wCAAK,WAAU;kDAAuB,KAAK,KAAK;;;;;;;+BAV5C,KAAK,IAAI;;;;;wBAapB;;;;;;kCAIF,kYAAC;wBAAI,WAAU;kCACb,cAAA,kYAAC;4BAAE,WAAU;sCAAoC;;;;;;;;;;;;;;;;;;;AAO3D"}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaushikieee/Downloads/code/components/peep/live-map.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState } from 'react';\nimport maplibregl, { type Map as MaplibreMap } from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\n\ninterface MapPin {\n  id: number;\n  lat: number;\n  lng: number;\n  category: string;\n  severity: 'Low' | 'Medium' | 'High';\n  note?: string;\n}\n\nconst severityColors = {\n  Low: '#16a34a',\n  Medium: '#f59e0b',\n  High: '#ef4444',\n};\n\ninterface LiveMapProps {\n  pins: MapPin[];\n  onPinClick?: (pin: MapPin) => void;\n}\n\nexport default function LiveMap({ pins, onPinClick }: LiveMapProps) {\n  const mapContainer = useRef<HTMLDivElement>(null);\n  const map = useRef<MaplibreMap | null>(null);\n  const [userLocation, setUserLocation] = useState<[number, number] | null>(null);\n\n  // Initialize map\n  useEffect(() => {\n    if (!mapContainer.current) return;\n    \n    console.log('[LiveMap] Initializing Maplibre GL');\n\n    try {\n      // Check for WebGL support\n      const canvas = document.createElement('canvas');\n      const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n      if (!gl) {\n        console.error('[LiveMap] WebGL not supported');\n      }\n\n      const mapInstance = new maplibregl.Map({\n        container: mapContainer.current,\n        style: {\n          version: 8,\n          sources: {\n            'osm': {\n              type: 'raster',\n              tiles: ['https://tile.openstreetmap.org/{z}/{x}/{y}.png'],\n              tileSize: 256,\n              attribution: '© OpenStreetMap contributors'\n            }\n          },\n          layers: [\n            {\n              id: 'osm',\n              type: 'raster',\n              source: 'osm',\n              minzoom: 0,\n              maxzoom: 19\n            }\n          ]\n        },\n        center: [77.0269, 11.0420],\n        zoom: 13,\n      });\n\n      mapInstance.on('load', () => {\n        console.log('[LiveMap] Map loaded successfully');\n        map.current = mapInstance;\n      });\n\n      mapInstance.on('error', (e: any) => {\n        console.error('[LiveMap] Map error event:', {\n          message: e?.message,\n          type: e?.type,\n          error: e?.error,\n        });\n      });\n\n      mapInstance.on('style.load', () => {\n        console.log('[LiveMap] Style loaded');\n      });\n\n      return () => {\n        if (map.current) {\n          try {\n            map.current.remove();\n          } catch (e) {\n            console.error('[LiveMap] Error removing map:', e);\n          }\n          map.current = null;\n        }\n      };\n    } catch (err) {\n      console.error('[LiveMap] Error creating map:', err);\n      if (err instanceof Error) {\n        console.error('[LiveMap] Error details:', err.message);\n      }\n    }\n  }, []);\n\n  // Add markers when pins change\n  useEffect(() => {\n    if (!map.current) return;\n\n    console.log('[LiveMap] Adding', pins.length, 'markers');\n\n    // Remove existing markers\n    const existingMarkers = document.querySelectorAll('.pin-marker');\n    existingMarkers.forEach(marker => marker.remove());\n\n    // Add new markers\n    pins.forEach((pin) => {\n      // Create marker element\n      const markerEl = document.createElement('div');\n      markerEl.className = 'pin-marker';\n      markerEl.style.cssText = `\n        width: 32px;\n        height: 32px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 24px;\n        cursor: pointer;\n      `;\n      // Use emoji based on severity\n      const severityEmojis = {\n        Low: '❗',\n        Medium: '❗️❗️',\n        High: '⚠️',\n      };\n      markerEl.textContent = severityEmojis[pin.severity];\n      // Adjust letter spacing for medium severity to reduce gap\n      if (pin.severity === 'Medium') {\n        markerEl.style.letterSpacing = '-0.3em';\n        markerEl.style.fontSize = '20px';\n      }\n\n      // Create marker (without popup - use card instead)\n      const marker = new maplibregl.Marker({ element: markerEl })\n        .setLngLat([pin.lng, pin.lat])\n        .addTo(map.current!);\n\n      // Add click handler to show card\n      markerEl.addEventListener('click', () => {\n        onPinClick?.(pin);\n      });\n    });\n  }, [pins, onPinClick]);\n\n  // Get user location and center map on it, fallback to mock data center\n  useEffect(() => {\n    const centerMapOnLocation = (lng: number, lat: number) => {\n      if (map.current) {\n        map.current.flyTo({\n          center: [lng, lat],\n          zoom: 15,\n          duration: 1500,\n        });\n      }\n    };\n\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const loc: [number, number] = [position.coords.longitude, position.coords.latitude];\n          setUserLocation(loc);\n          console.log('[LiveMap] Got user location:', loc);\n          centerMapOnLocation(loc[0], loc[1]);\n        },\n        (error) => {\n          console.log('[LiveMap] Geolocation error:', error.code, '- Using fallback location');\n          // Fallback to mock data center point (11.0420, 77.0269)\n          centerMapOnLocation(77.0269, 11.0420);\n        },\n        { timeout: 5000, maximumAge: 3600000 }\n      );\n    } else {\n      console.log('[LiveMap] Geolocation not available - Using fallback location');\n      // Fallback to mock data center point\n      centerMapOnLocation(77.0269, 11.0420);\n    }\n  }, []);\n\n  // Add user location marker\n  useEffect(() => {\n    if (!map.current || !userLocation) return;\n\n    const userMarkerEl = document.createElement('div');\n    userMarkerEl.style.cssText = `\n      background-color: #3b82f6;\n      border: 3px solid white;\n      border-radius: 50%;\n      width: 24px;\n      height: 24px;\n      box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n    `;\n\n    new maplibregl.Marker({ element: userMarkerEl })\n      .setLngLat(userLocation)\n      .addTo(map.current);\n  }, [userLocation]);\n\n  return (\n    <div className=\"relative w-full h-full overflow-hidden bg-gray-100\">\n      <div\n        ref={mapContainer}\n        className=\"w-full h-full\"\n        style={{ width: '100%', height: '100%' }}\n      />\n\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 406, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaushikieee/Downloads/code/hooks/useAdminAuth.ts"],"sourcesContent":["import { useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\n\n/**\n * Hook to check admin authentication and token validity\n * Redirects to login if not authenticated or token expired\n */\nexport function useAdminAuth() {\n  const router = useRouter();\n\n  useEffect(() => {\n    const token = localStorage.getItem('admin-auth');\n    const expiresAt = localStorage.getItem('admin-auth-expires');\n\n    if (!token) {\n      router.push('/admin/login');\n      return;\n    }\n\n    // Check token expiration\n    if (expiresAt) {\n      const expiration = new Date(expiresAt);\n      if (new Date() > expiration) {\n        // Token expired\n        localStorage.removeItem('admin-auth');\n        localStorage.removeItem('admin-auth-expires');\n        router.push('/admin/login?expired=true');\n        return;\n      }\n    }\n  }, [router]);\n}\n\n/**\n * Clear admin session data\n */\nexport function clearAdminSession() {\n  localStorage.removeItem('admin-auth');\n  localStorage.removeItem('admin-auth-expires');\n  localStorage.removeItem('admin-attempts');\n  localStorage.removeItem('admin-lockout');\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAMO,SAAS;IACd,MAAM,SAAS,IAAA,mSAAS;IAExB,IAAA,sWAAS,EAAC;QACR,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,MAAM,YAAY,aAAa,OAAO,CAAC;QAEvC,IAAI,CAAC,OAAO;YACV,OAAO,IAAI,CAAC;YACZ;QACF;QAEA,yBAAyB;QACzB,IAAI,WAAW;YACb,MAAM,aAAa,IAAI,KAAK;YAC5B,IAAI,IAAI,SAAS,YAAY;gBAC3B,gBAAgB;gBAChB,aAAa,UAAU,CAAC;gBACxB,aAAa,UAAU,CAAC;gBACxB,OAAO,IAAI,CAAC;gBACZ;YACF;QACF;IACF,GAAG;QAAC;KAAO;AACb;AAKO,SAAS;IACd,aAAa,UAAU,CAAC;IACxB,aAAa,UAAU,CAAC;IACxB,aAAa,UAAU,CAAC;IACxB,aAAa,UAAU,CAAC;AAC1B"}},
    {"offset": {"line": 450, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaushikieee/Downloads/code/app/admin/zones/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { LogOut, Plus, Trash2, Edit2, X } from 'lucide-react';\nimport AdminSidebar from '@/components/admin/sidebar';\nimport LiveMap from '@/components/peep/live-map';\nimport { useAdminAuth, clearAdminSession } from '@/hooks/useAdminAuth';\n\ninterface Zone {\n  id: string;\n  name: string;\n  location: string;\n  severity: 'Red' | 'Yellow' | 'Green';\n  color: string;\n}\n\nconst mockZones: Zone[] = [\n  { id: 'zone-a', name: 'Zone A', location: 'Park North', severity: 'Red', color: '#ef4444' },\n  { id: 'zone-b', name: 'Zone B', location: 'School East', severity: 'Yellow', color: '#f59e0b' },\n  { id: 'zone-c', name: 'Zone C', location: 'Community Center', severity: 'Green', color: '#16a34a' },\n];\n\nexport default function ZonesPage() {\n  const router = useRouter();\n  useAdminAuth(); // Check authentication\n  const [zones, setZones] = useState<Zone[]>(mockZones);\n  const [selectedZone, setSelectedZone] = useState<Zone | null>(null);\n  const [showForm, setShowForm] = useState(false);\n  const [formData, setFormData] = useState({ name: '', location: '', severity: 'Green' });\n  const [reports, setReports] = useState<any[]>([]);\n\n  useEffect(() => {\n    fetch('/api/data/reports')\n      .then(r => r.json())\n      .then(data => {\n        setReports(data.map((r: any) => ({\n          id: r.id,\n          lat: r.lat,\n          lng: r.lng,\n          category: r.category,\n          severity: r.severity,\n          note: r.note,\n        })));\n      })\n      .catch(err => console.error('Failed to load reports:', err));\n  }, []);\n\n  const handleLogout = () => {\n    clearAdminSession();\n    router.push('/admin/login');\n  };\n\n  const handleAddZone = () => {\n    if (!formData.name.trim()) return;\n    \n    const newZone: Zone = {\n      id: `zone-${Date.now()}`,\n      name: formData.name,\n      location: formData.location,\n      severity: formData.severity as 'Red' | 'Yellow' | 'Green',\n      color:\n        formData.severity === 'Red'\n          ? '#ef4444'\n          : formData.severity === 'Yellow'\n            ? '#f59e0b'\n            : '#16a34a',\n    };\n    setZones([...zones, newZone]);\n    setFormData({ name: '', location: '', severity: 'Green' });\n    setShowForm(false);\n  };\n\n  const handleDeleteZone = (id: string) => {\n    setZones(zones.filter((z) => z.id !== id));\n    if (selectedZone?.id === id) setSelectedZone(null);\n  };\n\n  return (\n    <div className=\"flex h-screen bg-gray-100\">\n      <AdminSidebar open={true} onClose={() => {}} />\n\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        <div className=\"bg-white border-b border-gray-200 p-4 flex items-center justify-between\">\n          <h1 className=\"text-2xl font-bold text-gray-900\">Zone Editor</h1>\n          <button\n            onClick={handleLogout}\n            className=\"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-all\"\n          >\n            <LogOut className=\"w-5 h-5\" />\n            Logout\n          </button>\n        </div>\n\n        <div className=\"flex-1 overflow-auto p-6\">\n          <div className=\"grid grid-cols-4 gap-6 h-full\">\n            {/* Left Panel */}\n            <div className=\"col-span-1 space-y-4\">\n              <button\n                onClick={() => setShowForm(!showForm)}\n                className=\"w-full flex items-center justify-center gap-2 py-2 px-4 rounded-lg text-white font-medium bg-blue-600 hover:bg-blue-700 transition-all\"\n              >\n                <Plus className=\"w-4 h-4\" />\n                Add Zone\n              </button>\n\n              {showForm && (\n                <div className=\"bg-white rounded-lg border border-gray-200 p-4 space-y-3\">\n                  <input\n                    type=\"text\"\n                    placeholder=\"Zone name\"\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm\"\n                  />\n                  <input\n                    type=\"text\"\n                    placeholder=\"Location\"\n                    value={formData.location}\n                    onChange={(e) => setFormData({ ...formData, location: e.target.value })}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm\"\n                  />\n                  <select\n                    value={formData.severity}\n                    onChange={(e) => setFormData({ ...formData, severity: e.target.value })}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm\"\n                  >\n                    <option>Green</option>\n                    <option>Yellow</option>\n                    <option>Red</option>\n                  </select>\n                  <div className=\"flex gap-2\">\n                    <button\n                      onClick={handleAddZone}\n                      disabled={!formData.name.trim()}\n                      className=\"flex-1 py-2 px-3 rounded-lg text-white text-sm font-medium bg-blue-600 disabled:opacity-50\"\n                    >\n                      Create\n                    </button>\n                    <button\n                      onClick={() => setShowForm(false)}\n                      className=\"flex-1 py-2 px-3 rounded-lg border border-gray-300 text-gray-700 text-sm hover:bg-gray-50\"\n                    >\n                      Cancel\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\n                <div className=\"p-4 border-b border-gray-200 font-semibold text-gray-900\">Zones ({zones.length})</div>\n                <div className=\"divide-y max-h-96 overflow-y-auto\">\n                  {zones.map((zone) => (\n                    <div\n                      key={zone.id}\n                      onClick={() => setSelectedZone(zone)}\n                      className={`p-3 cursor-pointer hover:bg-gray-50 transition-colors ${\n                        selectedZone?.id === zone.id ? 'bg-blue-50 border-l-4' : ''\n                      }`}\n                      style={{ borderLeftColor: selectedZone?.id === zone.id ? '#3b82f6' : 'transparent' }}\n                    >\n                      <div className=\"flex items-start justify-between gap-2 mb-1\">\n                        <div className=\"flex-1\">\n                          <p className=\"font-medium text-sm text-gray-900\">{zone.name}</p>\n                          <p className=\"text-xs text-gray-600\">{zone.location}</p>\n                        </div>\n                        <div className=\"w-3 h-3 rounded-full flex-shrink-0\" style={{ backgroundColor: zone.color }} />\n                      </div>\n                      <div className=\"flex gap-1\">\n                        <button className=\"flex-1 px-2 py-1 text-xs rounded hover:bg-gray-200 flex items-center justify-center gap-1\">\n                          <Edit2 className=\"w-3 h-3\" />\n                        </button>\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleDeleteZone(zone.id);\n                          }}\n                          className=\"flex-1 px-2 py-1 text-xs rounded hover:bg-red-100 text-red-600 flex items-center justify-center gap-1\"\n                        >\n                          <Trash2 className=\"w-3 h-3\" />\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n\n            {/* Right Panel - Map */}\n            <div className=\"col-span-3 bg-white rounded-lg border border-gray-200 overflow-hidden\">\n              <div className=\"h-full\">\n                <LiveMap\n                  pins={reports}\n                  onPinClick={(pin) => {\n                    console.log('Clicked pin:', pin);\n                  }}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}