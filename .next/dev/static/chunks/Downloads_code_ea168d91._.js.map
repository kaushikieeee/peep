{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaushikieee/Downloads/code/components/admin/sidebar.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport {\n  LayoutDashboard,\n  FileText,\n  MapPin,\n  Share2,\n  Store,\n  Settings,\n  X,\n} from 'lucide-react';\n\ninterface AdminSidebarProps {\n  open: boolean;\n  onClose: () => void;\n}\n\nconst menuItems = [\n  { href: '/admin/dashboard', label: 'Dashboard', icon: LayoutDashboard },\n  { href: '/admin/evidence', label: 'Evidence Management', icon: FileText },\n  { href: '/admin/zones', label: 'Zone Editor', icon: MapPin },\n  { href: '/admin/forwarding', label: 'Authority Forwarding', icon: Share2 },\n  { href: '/admin/marketplace', label: 'Service Marketplace', icon: Store },\n  { href: '/admin/settings', label: 'Settings', icon: Settings },\n];\n\nexport default function AdminSidebar({ open, onClose }: AdminSidebarProps) {\n  const pathname = usePathname();\n\n  return (\n    <>\n      {/* Overlay for mobile */}\n      {open && (\n        <div\n          className=\"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden\"\n          onClick={onClose}\n        />\n      )}\n\n      {/* Sidebar */}\n      <div\n        className={`fixed lg:relative w-64 h-screen bg-gray-900 text-white transition-all z-40 ${\n          open ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'\n        }`}\n      >\n        {/* Logo */}\n        <div className=\"p-6 border-b border-gray-800\">\n          <div className=\"flex items-center justify-between\">\n            <Link href=\"/admin/dashboard\" className=\"text-2xl font-bold\">\n              PEEP\n            </Link>\n            <button onClick={onClose} className=\"lg:hidden p-1 hover:bg-gray-800 rounded\">\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n          <p className=\"text-xs text-gray-400 mt-2\">Admin Portal</p>\n        </div>\n\n        {/* Navigation Menu */}\n        <nav className=\"p-4 space-y-2\">\n          {menuItems.map((item) => {\n            const Icon = item.icon;\n            const isActive = pathname.startsWith(item.href);\n\n            return (\n              <Link\n                key={item.href}\n                href={item.href}\n                onClick={onClose}\n                className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${\n                  isActive\n                    ? 'bg-blue-600 text-white'\n                    : 'text-gray-400 hover:bg-gray-800 hover:text-white'\n                }`}\n              >\n                <Icon className=\"w-5 h-5\" />\n                <span className=\"text-sm font-medium\">{item.label}</span>\n              </Link>\n            );\n          })}\n        </nav>\n\n        {/* Footer */}\n        <div className=\"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-800\">\n          <p className=\"text-xs text-gray-500 text-center\">\n            PEEP Admin v1.0\n          </p>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAJA;;;;AAmBA,MAAM,YAAY;IAChB;QAAE,MAAM;QAAoB,OAAO;QAAa,MAAM,2VAAe;IAAC;IACtE;QAAE,MAAM;QAAmB,OAAO;QAAuB,MAAM,sUAAQ;IAAC;IACxE;QAAE,MAAM;QAAgB,OAAO;QAAe,MAAM,gUAAM;IAAC;IAC3D;QAAE,MAAM;QAAqB,OAAO;QAAwB,MAAM,gUAAM;IAAC;IACzE;QAAE,MAAM;QAAsB,OAAO;QAAuB,MAAM,yTAAK;IAAC;IACxE;QAAE,MAAM;QAAmB,OAAO;QAAY,MAAM,kUAAQ;IAAC;CAC9D;AAEc,SAAS,aAAa,EAAE,IAAI,EAAE,OAAO,EAAqB;;IACvE,MAAM,WAAW,IAAA,wSAAW;IAE5B,qBACE;;YAEG,sBACC,iVAAC;gBACC,WAAU;gBACV,SAAS;;;;;;0BAKb,iVAAC;gBACC,WAAW,CAAC,2EAA2E,EACrF,OAAO,kBAAkB,sCACzB;;kCAGF,iVAAC;wBAAI,WAAU;;0CACb,iVAAC;gCAAI,WAAU;;kDACb,iVAAC,8TAAI;wCAAC,MAAK;wCAAmB,WAAU;kDAAqB;;;;;;kDAG7D,iVAAC;wCAAO,SAAS;wCAAS,WAAU;kDAClC,cAAA,iVAAC,6SAAC;4CAAC,WAAU;;;;;;;;;;;;;;;;;0CAGjB,iVAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;kCAI5C,iVAAC;wBAAI,WAAU;kCACZ,UAAU,GAAG,CAAC,CAAC;4BACd,MAAM,OAAO,KAAK,IAAI;4BACtB,MAAM,WAAW,SAAS,UAAU,CAAC,KAAK,IAAI;4BAE9C,qBACE,iVAAC,8TAAI;gCAEH,MAAM,KAAK,IAAI;gCACf,SAAS;gCACT,WAAW,CAAC,4DAA4D,EACtE,WACI,2BACA,oDACJ;;kDAEF,iVAAC;wCAAK,WAAU;;;;;;kDAChB,iVAAC;wCAAK,WAAU;kDAAuB,KAAK,KAAK;;;;;;;+BAV5C,KAAK,IAAI;;;;;wBAapB;;;;;;kCAIF,iVAAC;wBAAI,WAAU;kCACb,cAAA,iVAAC;4BAAE,WAAU;sCAAoC;;;;;;;;;;;;;;;;;;;AAO3D;GAjEwB;;QACL,wSAAW;;;KADN"}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaushikieee/Downloads/code/components/peep/live-map.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState } from 'react';\nimport maplibregl, { type Map as MaplibreMap } from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\n\ninterface MapPin {\n  id: number;\n  lat: number;\n  lng: number;\n  category: string;\n  severity: 'Low' | 'Medium' | 'High';\n  note?: string;\n}\n\nconst severityColors = {\n  Low: '#16a34a',\n  Medium: '#f59e0b',\n  High: '#ef4444',\n};\n\ninterface LiveMapProps {\n  pins: MapPin[];\n  onPinClick?: (pin: MapPin) => void;\n}\n\nexport default function LiveMap({ pins, onPinClick }: LiveMapProps) {\n  const mapContainer = useRef<HTMLDivElement>(null);\n  const map = useRef<MaplibreMap | null>(null);\n  const [userLocation, setUserLocation] = useState<[number, number] | null>(null);\n\n  // Initialize map\n  useEffect(() => {\n    if (!mapContainer.current) return;\n    \n    console.log('[LiveMap] Initializing Maplibre GL');\n\n    try {\n      // Check for WebGL support\n      const canvas = document.createElement('canvas');\n      const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n      if (!gl) {\n        console.error('[LiveMap] WebGL not supported');\n      }\n\n      const mapInstance = new maplibregl.Map({\n        container: mapContainer.current,\n        style: {\n          version: 8,\n          sources: {\n            'osm': {\n              type: 'raster',\n              tiles: ['https://tile.openstreetmap.org/{z}/{x}/{y}.png'],\n              tileSize: 256,\n              attribution: '© OpenStreetMap contributors'\n            }\n          },\n          layers: [\n            {\n              id: 'osm',\n              type: 'raster',\n              source: 'osm',\n              minzoom: 0,\n              maxzoom: 19\n            }\n          ]\n        },\n        center: [77.0269, 11.0420],\n        zoom: 13,\n      });\n\n      mapInstance.on('load', () => {\n        console.log('[LiveMap] Map loaded successfully');\n        map.current = mapInstance;\n      });\n\n      mapInstance.on('error', (e: any) => {\n        console.error('[LiveMap] Map error event:', {\n          message: e?.message,\n          type: e?.type,\n          error: e?.error,\n        });\n      });\n\n      mapInstance.on('style.load', () => {\n        console.log('[LiveMap] Style loaded');\n      });\n\n      return () => {\n        if (map.current) {\n          try {\n            map.current.remove();\n          } catch (e) {\n            console.error('[LiveMap] Error removing map:', e);\n          }\n          map.current = null;\n        }\n      };\n    } catch (err) {\n      console.error('[LiveMap] Error creating map:', err);\n      if (err instanceof Error) {\n        console.error('[LiveMap] Error details:', err.message);\n      }\n    }\n  }, []);\n\n  // Add markers when pins change\n  useEffect(() => {\n    if (!map.current) return;\n\n    console.log('[LiveMap] Adding', pins.length, 'markers');\n\n    // Remove existing markers\n    const existingMarkers = document.querySelectorAll('.pin-marker');\n    existingMarkers.forEach(marker => marker.remove());\n\n    // Add new markers\n    pins.forEach((pin) => {\n      // Create marker element\n      const markerEl = document.createElement('div');\n      markerEl.className = 'pin-marker';\n      markerEl.style.cssText = `\n        width: 32px;\n        height: 32px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 24px;\n        cursor: pointer;\n      `;\n      // Use emoji based on severity\n      const severityEmojis = {\n        Low: '❗',\n        Medium: '❗️❗️',\n        High: '⚠️',\n      };\n      markerEl.textContent = severityEmojis[pin.severity];\n      // Adjust letter spacing for medium severity to reduce gap\n      if (pin.severity === 'Medium') {\n        markerEl.style.letterSpacing = '-0.3em';\n        markerEl.style.fontSize = '20px';\n      }\n\n      // Create marker (without popup - use card instead)\n      const marker = new maplibregl.Marker({ element: markerEl })\n        .setLngLat([pin.lng, pin.lat])\n        .addTo(map.current!);\n\n      // Add click handler to show card\n      markerEl.addEventListener('click', () => {\n        onPinClick?.(pin);\n      });\n    });\n  }, [pins, onPinClick]);\n\n  // Get user location and center map on it, fallback to mock data center\n  useEffect(() => {\n    const centerMapOnLocation = (lng: number, lat: number) => {\n      if (map.current) {\n        map.current.flyTo({\n          center: [lng, lat],\n          zoom: 15,\n          duration: 1500,\n        });\n      }\n    };\n\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const loc: [number, number] = [position.coords.longitude, position.coords.latitude];\n          setUserLocation(loc);\n          console.log('[LiveMap] Got user location:', loc);\n          centerMapOnLocation(loc[0], loc[1]);\n        },\n        (error) => {\n          console.log('[LiveMap] Geolocation error:', error.code, '- Using fallback location');\n          // Fallback to mock data center point (11.0420, 77.0269)\n          centerMapOnLocation(77.0269, 11.0420);\n        },\n        { timeout: 5000, maximumAge: 3600000 }\n      );\n    } else {\n      console.log('[LiveMap] Geolocation not available - Using fallback location');\n      // Fallback to mock data center point\n      centerMapOnLocation(77.0269, 11.0420);\n    }\n  }, []);\n\n  // Add user location marker\n  useEffect(() => {\n    if (!map.current || !userLocation) return;\n\n    const userMarkerEl = document.createElement('div');\n    userMarkerEl.style.cssText = `\n      background-color: #3b82f6;\n      border: 3px solid white;\n      border-radius: 50%;\n      width: 24px;\n      height: 24px;\n      box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n    `;\n\n    new maplibregl.Marker({ element: userMarkerEl })\n      .setLngLat(userLocation)\n      .addTo(map.current);\n  }, [userLocation]);\n\n  return (\n    <div className=\"relative w-full h-full overflow-hidden bg-gray-100\">\n      <div\n        ref={mapContainer}\n        className=\"w-full h-full\"\n        style={{ width: '100%', height: '100%' }}\n      />\n\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}