module.exports=[30898,a=>{"use strict";let b=(0,a.i(6481).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>b],30898)},27111,a=>{"use strict";let b=(0,a.i(6481).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],27111)},11271,a=>{"use strict";function b(a,b){if(!a.trim())return b;let c=a.toLowerCase();return b.filter(a=>a.name.toLowerCase().includes(c)).sort((a,b)=>a.name.toLowerCase().indexOf(c)-b.name.toLowerCase().indexOf(c)).slice(0,5)}a.s(["fuzzySearch",()=>b])},27477,a=>{"use strict";var b=a.i(66556),c=a.i(95820),d=a.i(30898),e=a.i(32479),f=a.i(27111);let g=(0,a.i(6481).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var h=a.i(15443),i=a.i(80591),j=a.i(11271);let k=[{name:"School Gate",lat:12.9716,lng:77.5946,zone:"Zone P1"},{name:"Park North",lat:12.974,lng:77.5955,zone:"Zone W2"},{name:"Sports Field",lat:12.9705,lng:77.5935,zone:"Zone P2"},{name:"Drainage Area",lat:12.9719,lng:77.595,zone:"Zone P1"},{name:"Construction Site",lat:12.9715,lng:77.5965,zone:"Zone C3"},{name:"Residential Corner",lat:12.971,lng:77.592,zone:"Zone W3"},{name:"Industrial Zone",lat:12.9745,lng:77.5945,zone:"Zone S1"},{name:"Local Market",lat:12.9695,lng:77.5955,zone:"Zone P3"},{name:"Park South",lat:12.9735,lng:77.593,zone:"Zone O1"},{name:"Walking Trail",lat:12.9725,lng:77.5938,zone:"Zone C2"}];function l(){let[a,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)([]);(0,c.useEffect)(()=>{q?p(!1):"geolocation"in navigator?navigator.geolocation.getCurrentPosition(a=>{let{latitude:b,longitude:c}=a.coords;l({lat:b,lng:c}),sessionStorage.setItem("peep-report-location",JSON.stringify({lat:b,lng:c})),p(!1)},a=>{console.log("[v0] Geolocation error:",a.message),n("Unable to access your location. Please enable location permissions."),p(!1)}):(n("Geolocation is not supported by your browser."),p(!1))},[q]),(0,c.useEffect)(()=>{s.trim()?v((0,j.fuzzySearch)(s,k)):v([])},[s]);let w=a=>{l({lat:a.lat,lng:a.lng}),sessionStorage.setItem("peep-report-location",JSON.stringify({lat:a.lat,lng:a.lng})),t(""),v([]),r(!1)};return(0,b.jsxs)("div",{className:"min-h-screen bg-white flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,b.jsx)(i.default,{href:"/peep/user",className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,b.jsx)(d.ChevronLeft,{className:"w-5 h-5"})}),(0,b.jsx)("h1",{className:"text-lg font-semibold",children:"New Report"}),(0,b.jsx)("div",{className:"w-10"})]}),(0,b.jsx)("div",{className:"flex-1 px-4 py-8 flex flex-col items-center justify-center",children:o&&!q?(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto animate-pulse",style:{backgroundColor:"var(--peep-primary)"},children:(0,b.jsx)(e.MapPin,{className:"w-8 h-8 text-white"})}),(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Finding your location..."}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"This helps us pinpoint where the issue is."}),(0,b.jsx)("button",{onClick:()=>r(!0),className:"text-sm font-semibold",style:{color:"var(--peep-primary)"},children:"Search location instead"})]}):m&&!q?(0,b.jsxs)("div",{className:"w-full max-w-sm text-center space-y-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto bg-red-100",children:(0,b.jsx)(f.AlertCircle,{className:"w-8 h-8 text-red-600"})}),(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Location Access Required"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:m}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Please enable location in your browser settings and refresh."}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>window.location.reload(),className:"flex-1 py-3 px-4 rounded-lg font-semibold text-white transition-all active:scale-95",style:{backgroundColor:"var(--peep-primary)"},children:"Try Again"}),(0,b.jsx)("button",{onClick:()=>r(!0),className:"flex-1 py-3 px-4 rounded-lg font-semibold border-2",style:{borderColor:"var(--peep-primary)",color:"var(--peep-primary)"},children:"Search Instead"})]})]}):q?(0,b.jsxs)("div",{className:"w-full max-w-sm space-y-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Search Location"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 border-2 border-gray-300 rounded-lg focus-within:border-2",style:{focusWithinBorderColor:"var(--peep-primary)"},children:[(0,b.jsx)(g,{className:"w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Type location name...",value:s,onChange:a=>t(a.target.value),autoFocus:!0,className:"flex-1 outline-none text-sm"}),s&&(0,b.jsx)("button",{onClick:()=>{t(""),v([])},className:"p-1 hover:bg-gray-100 rounded",children:(0,b.jsx)(h.X,{className:"w-4 h-4 text-gray-400"})})]}),u.length>0&&(0,b.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-300 rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto",children:u.map(a=>(0,b.jsxs)("button",{onClick:()=>w(a),className:"w-full text-left px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-0 transition-colors",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-0.5",children:a.zone})]},`${a.lat}-${a.lng}`))}),s&&0===u.length&&(0,b.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-300 rounded-lg p-4 text-center text-sm text-gray-600 z-50",children:"No locations found. Try another name."})]}),(0,b.jsxs)("div",{className:"space-y-2 text-xs text-gray-600",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-700",children:"Suggested locations:"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:k.slice(0,6).map(a=>(0,b.jsxs)("button",{onClick:()=>w(a),className:"p-2 text-left rounded border border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-all",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.zone})]},`${a.lat}-${a.lng}`))})]}),(0,b.jsx)("button",{onClick:()=>{r(!1),t(""),v([]),p(!0)},className:"w-full py-3 px-4 rounded-lg font-semibold border-2 transition-all active:scale-95",style:{borderColor:"var(--peep-primary)",color:"var(--peep-primary)"},children:"Use Auto Location Instead"})]}):(0,b.jsxs)("div",{className:"w-full max-w-sm text-center space-y-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto",style:{backgroundColor:"var(--peep-primary)"},children:(0,b.jsx)(e.MapPin,{className:"w-8 h-8 text-white"})}),(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Location Captured"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Lat: ",a?.lat.toFixed(4),", Lng: ",a?.lng.toFixed(4)]}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Ready to document the issue?"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(i.default,{href:"/peep/user/report-flow/capture-photo",className:"flex-1 py-3 px-4 rounded-lg font-semibold text-white transition-all active:scale-95",style:{backgroundColor:"var(--peep-primary)"},children:"Next: Capture Photo"}),(0,b.jsx)("button",{onClick:()=>{r(!0),l(null)},className:"flex-1 py-3 px-4 rounded-lg font-semibold border-2",style:{borderColor:"var(--peep-primary)",color:"var(--peep-primary)"},children:"Change Location"})]})]})})]})}a.s(["default",()=>l],27477)}];

//# sourceMappingURL=Downloads_code_5c9fc2a7._.js.map