{"version":3,"sources":["../../../../../../Downloads/code/app/peep/user/new-report/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { ChevronLeft, MapPin, AlertCircle, Search, X, CheckCircle2, Share2, Camera, AlertTriangle } from 'lucide-react';\nimport Link from 'next/link';\nimport { fuzzySearch } from '@/lib/fuzzy-search';\n\ninterface POI {\n  name: string;\n  lat: number;\n  lng: number;\n  zone: string;\n}\n\nconst MOCK_POIS: POI[] = [\n  { name: 'School Gate', lat: 12.9716, lng: 77.5946, zone: 'Zone P1' },\n  { name: 'Park North', lat: 12.9740, lng: 77.5955, zone: 'Zone W2' },\n  { name: 'Sports Field', lat: 12.9705, lng: 77.5935, zone: 'Zone P2' },\n  { name: 'Drainage Area', lat: 12.9719, lng: 77.5950, zone: 'Zone P1' },\n  { name: 'Construction Site', lat: 12.9715, lng: 77.5965, zone: 'Zone C3' },\n  { name: 'Residential Corner', lat: 12.9710, lng: 77.5920, zone: 'Zone W3' },\n  { name: 'Industrial Zone', lat: 12.9745, lng: 77.5945, zone: 'Zone S1' },\n  { name: 'Local Market', lat: 12.9695, lng: 77.5955, zone: 'Zone P3' },\n  { name: 'Park South', lat: 12.9735, lng: 77.5930, zone: 'Zone O1' },\n  { name: 'Walking Trail', lat: 12.9725, lng: 77.5938, zone: 'Zone C2' },\n];\n\nconst categories = [\n  'Soil contamination',\n  'Stagnant water',\n  'Plastic / microplastics',\n  'Damaged turf / turf runoff',\n  'Waste dumping',\n  'Other',\n];\n\nconst severities = [\n  { label: 'Low', color: '#c6f6d5', textColor: '#15803d' },\n  { label: 'Medium', color: '#fcd34d', textColor: '#78350f' },\n  { label: 'High', color: '#fca5a5', textColor: '#7f1d1d' },\n];\n\nexport default function NewReportPage() {\n  // Location state\n  const [location, setLocation] = useState<{ lat: number; lng: number; name?: string } | null>(null);\n  const [locationError, setLocationError] = useState<string | null>(null);\n  const [isLoadingLocation, setIsLoadingLocation] = useState(true);\n  const [useManualSearch, setUseManualSearch] = useState(false);\n  const [useCustomAddress, setUseCustomAddress] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState<POI[]>([]);\n  const [customAddress, setCustomAddress] = useState('');\n  const [customLat, setCustomLat] = useState('');\n  const [customLng, setCustomLng] = useState('');\n  const [mapsLinkError, setMapsLinkError] = useState('');\n\n  // Form state\n  const [category, setCategory] = useState('');\n  const [severity, setSeverity] = useState('');\n  const [description, setDescription] = useState('');\n  const [reporterName, setReporterName] = useState('');\n  const [photoBase64, setPhotoBase64] = useState<string | null>(null);\n  const [photoPreview, setPhotoPreview] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const cameraInputRef = useRef<HTMLInputElement>(null);\n\n  // Submission state\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitError, setSubmitError] = useState('');\n  const [submitted, setSubmitted] = useState(false);\n  const [submittedId, setSubmittedId] = useState('');\n\n  const router = useRouter();\n\n  // Auto-fetch location on mount\n  useEffect(() => {\n    if (!useManualSearch) {\n      if ('geolocation' in navigator) {\n        navigator.geolocation.getCurrentPosition(\n          (position) => {\n            const { latitude, longitude } = position.coords;\n            setLocation({ lat: latitude, lng: longitude, name: 'Current Location' });\n            setIsLoadingLocation(false);\n          },\n          (err) => {\n            console.log('[NewReport] Geolocation error:', err.message);\n            setLocationError('Unable to access your location. Please enable location permissions.');\n            setIsLoadingLocation(false);\n          }\n        );\n      } else {\n        setLocationError('Geolocation is not supported by your browser.');\n        setIsLoadingLocation(false);\n      }\n    } else {\n      setIsLoadingLocation(false);\n    }\n  }, [useManualSearch]);\n\n  // Handle location search\n  useEffect(() => {\n    if (searchQuery.trim()) {\n      const results = fuzzySearch(searchQuery, MOCK_POIS);\n      setSearchResults(results);\n    } else {\n      setSearchResults([]);\n    }\n  }, [searchQuery]);\n\n  const handleSelectLocation = (poi: POI) => {\n    setLocation({ lat: poi.lat, lng: poi.lng, name: poi.name });\n    setSearchQuery('');\n    setSearchResults([]);\n    setUseManualSearch(false);\n  };\n\n  const extractCoordsFromGoogleMapsLink = (link: string) => {\n    setMapsLinkError('');\n    try {\n      // Format: https://www.google.com/maps/place/12.9716,77.5946\n      // Or: https://maps.google.com/?q=12.9716,77.5946\n      // Or: https://www.google.com/maps/search/12.9716,77.5946\n      \n      const urlObj = new URL(link.trim());\n      let lat: number | null = null;\n      let lng: number | null = null;\n\n      // Try to extract from path (place/lat,lng format)\n      const pathMatch = urlObj.pathname.match(/place\\/([\\d.-]+),([\\d.-]+)/);\n      if (pathMatch) {\n        lat = parseFloat(pathMatch[1]);\n        lng = parseFloat(pathMatch[2]);\n      }\n\n      // Try to extract from query parameters\n      if (!lat || !lng) {\n        const qParam = urlObj.searchParams.get('q');\n        if (qParam) {\n          const coords = qParam.match(/([\\d.-]+),([\\d.-]+)/);\n          if (coords) {\n            lat = parseFloat(coords[1]);\n            lng = parseFloat(coords[2]);\n          }\n        }\n      }\n\n      if (lat && lng && !isNaN(lat) && !isNaN(lng)) {\n        setLocation({ lat, lng, name: `Custom Location (${lat.toFixed(4)}, ${lng.toFixed(4)})` });\n        setCustomAddress('');\n        setCustomLat('');\n        setCustomLng('');\n        setUseCustomAddress(false);\n        return;\n      }\n\n      setMapsLinkError('Could not extract coordinates from the Google Maps link. Try copying the full link from the address bar.');\n    } catch (e) {\n      setMapsLinkError('Invalid URL. Please paste a valid Google Maps link.');\n    }\n  };\n\n  const handleCustomCoordinates = () => {\n    setMapsLinkError('');\n    const lat = parseFloat(customLat);\n    const lng = parseFloat(customLng);\n\n    if (isNaN(lat) || isNaN(lng)) {\n      setMapsLinkError('Please enter valid latitude and longitude numbers');\n      return;\n    }\n\n    if (lat < -90 || lat > 90) {\n      setMapsLinkError('Latitude must be between -90 and 90');\n      return;\n    }\n\n    if (lng < -180 || lng > 180) {\n      setMapsLinkError('Longitude must be between -180 and 180');\n      return;\n    }\n\n    setLocation({ lat, lng, name: customAddress || `Custom Location (${lat.toFixed(4)}, ${lng.toFixed(4)})` });\n    setUseCustomAddress(false);\n  };\n\n  const handlePhotoCapture = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const base64 = reader.result as string;\n        setPhotoBase64(base64);\n        setPhotoPreview(base64);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    // Validate all required fields\n    if (!location?.lat || !location?.lng) {\n      setSubmitError('Location is required');\n      return;\n    }\n    if (!category) {\n      setSubmitError('Please select a pollution category');\n      return;\n    }\n    if (!severity) {\n      setSubmitError('Please select a severity level');\n      return;\n    }\n    if (!description.trim()) {\n      setSubmitError('Please describe the issue');\n      return;\n    }\n\n    try {\n      setIsSubmitting(true);\n      setSubmitError('');\n\n      console.log('[NewReport] Submitting evidence directly without sessionStorage:', {\n        lat: location.lat,\n        lng: location.lng,\n        category,\n        severity,\n        description,\n        reporter: reporterName || 'Anonymous',\n        hasPhoto: !!photoBase64,\n      });\n\n      // Prepare evidence data\n      const evidenceData = {\n        lat: location.lat,\n        lng: location.lng,\n        category,\n        severity,\n        note: description,\n        reporter: reporterName || 'Anonymous',\n        date: new Date().toISOString().split('T')[0],\n        zone: 'User Submitted',\n        upvotes: 0,\n        verified: false,\n        status: 'Open',\n        images: photoBase64 ? [photoBase64] : [],\n      };\n\n      // Submit to API\n      const response = await fetch('/api/evidence/submit', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(evidenceData),\n      });\n\n      console.log('[NewReport] API response:', { status: response.status, ok: response.ok });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\n        throw new Error(errorData.error || `Failed to submit report (${response.status})`);\n      }\n\n      const result = await response.json();\n      console.log('[NewReport] Submission successful:', result);\n\n      setSubmittedId(result.id || `E${Date.now()}`);\n      setSubmitted(true);\n    } catch (err) {\n      console.error('[NewReport] Error submitting report:', err);\n      setSubmitError(err instanceof Error ? err.message : 'Failed to submit report. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Success screen\n  if (submitted) {\n    return (\n      <div className=\"min-h-screen flex flex-col items-center justify-center px-4\" style={{ backgroundColor: 'var(--peep-neutral-1)' }}>\n        <CheckCircle2 className=\"w-16 h-16 mb-4\" style={{ color: 'var(--peep-primary)' }} />\n        <h1 className=\"text-2xl font-bold mb-2 text-center text-balance\">Report Submitted!</h1>\n        <p className=\"text-gray-600 text-center mb-2\">Your evidence has been added to PEEP.</p>\n        <p className=\"text-xs text-gray-500 text-center mb-6\">ID: {submittedId}</p>\n\n        <Link\n          href=\"/peep/user\"\n          className=\"w-full max-w-sm py-3 px-4 rounded-2xl font-semibold text-white text-center transition-all active:scale-95\"\n          style={{ backgroundColor: 'var(--peep-primary)' }}\n        >\n          Back to Home\n        </Link>\n\n        <button className=\"w-full max-w-sm mt-2 py-2 px-4 rounded-lg border border-gray-300 hover:bg-gray-50 text-gray-700 text-sm flex items-center justify-center gap-2\">\n          <Share2 className=\"w-4 h-4\" /> Share This Report\n        </button>\n      </div>\n    );\n  }\n\n  // Location not ready\n  if (isLoadingLocation && !useManualSearch) {\n    return (\n      <div className=\"min-h-screen bg-white flex flex-col\">\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\n          <Link href=\"/peep/user\" className=\"p-2 hover:bg-gray-100 rounded-lg\">\n            <ChevronLeft className=\"w-5 h-5\" />\n          </Link>\n          <h1 className=\"text-lg font-semibold\">New Report</h1>\n          <div className=\"w-10\" />\n        </div>\n\n        <div className=\"flex-1 px-4 py-8 flex flex-col items-center justify-center\">\n          <div className=\"text-center space-y-4\">\n            <div className=\"w-16 h-16 rounded-full flex items-center justify-center mx-auto animate-pulse\" style={{ backgroundColor: 'var(--peep-primary)' }}>\n              <MapPin className=\"w-8 h-8 text-white\" />\n            </div>\n            <h2 className=\"text-lg font-semibold text-gray-900\">Finding your location...</h2>\n            <p className=\"text-sm text-gray-600\">This helps us pinpoint where the issue is.</p>\n            <button\n              onClick={() => setUseManualSearch(true)}\n              className=\"text-sm font-semibold\"\n              style={{ color: 'var(--peep-primary)' }}\n            >\n              Search location instead\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Location error\n  if (locationError && !useManualSearch) {\n    return (\n      <div className=\"min-h-screen bg-white flex flex-col\">\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\n          <Link href=\"/peep/user\" className=\"p-2 hover:bg-gray-100 rounded-lg\">\n            <ChevronLeft className=\"w-5 h-5\" />\n          </Link>\n          <h1 className=\"text-lg font-semibold\">New Report</h1>\n          <div className=\"w-10\" />\n        </div>\n\n        <div className=\"flex-1 px-4 py-8 flex flex-col items-center justify-center\">\n          <div className=\"w-full max-w-sm text-center space-y-4\">\n            <div className=\"w-16 h-16 rounded-full flex items-center justify-center mx-auto bg-red-100\">\n              <AlertCircle className=\"w-8 h-8 text-red-600\" />\n            </div>\n            <h2 className=\"text-lg font-semibold text-gray-900\">Location Access Required</h2>\n            <p className=\"text-sm text-gray-600\">{locationError}</p>\n            <p className=\"text-xs text-gray-500\">Please enable location in your browser settings and refresh.</p>\n            <div className=\"flex gap-2\">\n              <button\n                onClick={() => window.location.reload()}\n                className=\"flex-1 py-3 px-4 rounded-lg font-semibold text-white transition-all active:scale-95\"\n                style={{ backgroundColor: 'var(--peep-primary)' }}\n              >\n                Try Again\n              </button>\n              <button\n                onClick={() => setUseManualSearch(true)}\n                className=\"flex-1 py-3 px-4 rounded-lg font-semibold border-2\"\n                style={{ borderColor: 'var(--peep-primary)', color: 'var(--peep-primary)' }}\n              >\n                Search Instead\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Main form\n  return (\n    <div className=\"min-h-screen bg-white flex flex-col\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200 sticky top-0 bg-white z-10\">\n        <Link href=\"/peep/user\" className=\"p-2 hover:bg-gray-100 rounded-lg\">\n          <ChevronLeft className=\"w-5 h-5\" />\n        </Link>\n        <h1 className=\"text-lg font-semibold\">New Report</h1>\n        <div className=\"w-10\" />\n      </div>\n\n      {/* Form */}\n      <form onSubmit={handleSubmit} className=\"flex-1 overflow-y-auto px-4 py-6 space-y-6\">\n        {/* Location */}\n        <div>\n          <label className=\"block text-sm font-semibold mb-2 text-gray-900\">Location *</label>\n          {location ? (\n            <div className=\"bg-green-50 border border-green-200 rounded-lg p-3 space-y-2\">\n              <p className=\"text-sm font-medium text-green-900\">{location.name || `${location.lat.toFixed(4)}, ${location.lng.toFixed(4)}`}</p>\n              <div className=\"flex gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setLocation(null);\n                    setUseManualSearch(true);\n                  }}\n                  className=\"text-xs text-green-700 hover:text-green-900 font-semibold\"\n                >\n                  Change Location\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setLocation(null);\n                    setUseCustomAddress(true);\n                  }}\n                  className=\"text-xs text-green-700 hover:text-green-900 font-semibold\"\n                >\n                  Use Custom Address\n                </button>\n              </div>\n            </div>\n          ) : useCustomAddress ? (\n            <div className=\"space-y-3 bg-blue-50 border border-blue-200 rounded-lg p-4\">\n              <div className=\"flex justify-between items-center mb-3\">\n                <h3 className=\"font-semibold text-sm text-blue-900\">Custom Location</h3>\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setUseCustomAddress(false);\n                    setCustomAddress('');\n                    setCustomLat('');\n                    setCustomLng('');\n                    setMapsLinkError('');\n                  }}\n                  className=\"text-xs text-blue-700 hover:text-blue-900 font-semibold\"\n                >\n                  Back\n                </button>\n              </div>\n\n              {/* Google Maps Link */}\n              <div>\n                <label className=\"block text-xs font-semibold text-blue-900 mb-2\">Google Maps Link</label>\n                <div className=\"flex gap-2\">\n                  <input\n                    type=\"text\"\n                    placeholder=\"Paste Google Maps link (e.g., https://maps.google.com/...)\"\n                    className=\"flex-1 px-3 py-2 border border-blue-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-400\"\n                    onPaste={(e) => {\n                      const pastedText = e.clipboardData.getData('text');\n                      if (pastedText.includes('google.com/maps') || pastedText.includes('maps.google')) {\n                        extractCoordsFromGoogleMapsLink(pastedText);\n                      }\n                    }}\n                  />\n                </div>\n                <p className=\"text-xs text-blue-700 mt-1\">ðŸ’¡ Copy the full link from Google Maps address bar and paste it here</p>\n              </div>\n\n              {/* Manual Coordinates */}\n              <div className=\"border-t border-blue-200 pt-3\">\n                <p className=\"text-xs font-semibold text-blue-900 mb-2\">Or enter coordinates manually</p>\n                <div>\n                  <label className=\"block text-xs font-medium text-blue-900 mb-1\">Address (optional)</label>\n                  <input\n                    type=\"text\"\n                    placeholder=\"e.g., School Gate, Downtown\"\n                    value={customAddress}\n                    onChange={(e) => setCustomAddress(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-blue-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 mb-2\"\n                  />\n                </div>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  <div>\n                    <label className=\"block text-xs font-medium text-blue-900 mb-1\">Latitude</label>\n                    <input\n                      type=\"number\"\n                      step=\"0.0001\"\n                      placeholder=\"12.9716\"\n                      value={customLat}\n                      onChange={(e) => setCustomLat(e.target.value)}\n                      className=\"w-full px-3 py-2 border border-blue-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-400\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-xs font-medium text-blue-900 mb-1\">Longitude</label>\n                    <input\n                      type=\"number\"\n                      step=\"0.0001\"\n                      placeholder=\"77.5946\"\n                      value={customLng}\n                      onChange={(e) => setCustomLng(e.target.value)}\n                      className=\"w-full px-3 py-2 border border-blue-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-400\"\n                    />\n                  </div>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={handleCustomCoordinates}\n                  className=\"w-full mt-3 py-2 px-4 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700 transition\"\n                >\n                  Confirm Location\n                </button>\n              </div>\n\n              {mapsLinkError && (\n                <div className=\"bg-red-50 border border-red-200 rounded-lg p-2 mt-2\">\n                  <p className=\"text-xs text-red-700\">{mapsLinkError}</p>\n                </div>\n              )}\n            </div>\n          ) : useManualSearch ? (\n            <div className=\"space-y-3\">\n              <div className=\"relative\">\n                <div className=\"flex items-center gap-2 px-3 py-2 border-2 border-gray-300 rounded-lg\">\n                  <Search className=\"w-5 h-5 text-gray-400\" />\n                  <input\n                    type=\"text\"\n                    placeholder=\"Type location name...\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    autoFocus\n                    className=\"flex-1 outline-none text-sm\"\n                  />\n                  {searchQuery && (\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        setSearchQuery('');\n                        setSearchResults([]);\n                      }}\n                      className=\"p-1 hover:bg-gray-100 rounded\"\n                    >\n                      <X className=\"w-4 h-4 text-gray-400\" />\n                    </button>\n                  )}\n                </div>\n\n                {searchResults.length > 0 && (\n                  <div className=\"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-300 rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto\">\n                    {searchResults.map((poi) => (\n                      <button\n                        key={`${poi.lat}-${poi.lng}`}\n                        type=\"button\"\n                        onClick={() => handleSelectLocation(poi)}\n                        className=\"w-full text-left px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-0 transition-colors\"\n                      >\n                        <p className=\"font-medium text-gray-900 text-sm\">{poi.name}</p>\n                        <p className=\"text-xs text-gray-600 mt-0.5\">{poi.zone}</p>\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n\n              <div className=\"space-y-2 text-xs text-gray-600\">\n                <p className=\"font-semibold text-gray-700\">Suggested locations:</p>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  {MOCK_POIS.slice(0, 6).map((poi) => (\n                    <button\n                      key={`${poi.lat}-${poi.lng}`}\n                      type=\"button\"\n                      onClick={() => handleSelectLocation(poi)}\n                      className=\"p-2 text-left rounded border border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-all\"\n                    >\n                      <p className=\"text-sm font-medium text-gray-900\">{poi.name}</p>\n                      <p className=\"text-xs text-gray-500\">{poi.zone}</p>\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              <button\n                type=\"button\"\n                onClick={() => setUseCustomAddress(true)}\n                className=\"w-full mt-2 py-2 px-4 border-2 border-dashed border-gray-300 rounded-lg text-sm font-semibold text-gray-600 hover:border-gray-400 hover:bg-gray-50 transition\"\n              >\n                + Use Custom Address or Google Maps Link\n              </button>\n            </div>\n          ) : null}\n        </div>\n\n        {/* Category */}\n        <div>\n          <label className=\"block text-sm font-semibold mb-2 text-gray-900\">Pollution Type *</label>\n          <select\n            value={category}\n            onChange={(e) => setCategory(e.target.value)}\n            className=\"w-full px-4 py-3 rounded-lg border border-gray-300 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          >\n            <option value=\"\">Select category...</option>\n            {categories.map((cat) => (\n              <option key={cat} value={cat}>\n                {cat}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        {/* Severity */}\n        <div>\n          <label className=\"block text-sm font-semibold mb-2 text-gray-900\">Severity *</label>\n          <div className=\"space-y-2\">\n            {severities.map((sev) => (\n              <button\n                key={sev.label}\n                type=\"button\"\n                onClick={() => setSeverity(sev.label)}\n                className={`w-full p-3 rounded-lg border-2 transition-all text-left font-semibold ${\n                  severity === sev.label ? 'border-gray-400 shadow-md' : 'border-gray-200 hover:border-gray-300'\n                }`}\n                style={{\n                  backgroundColor: sev.color,\n                  color: sev.textColor,\n                }}\n              >\n                {sev.label}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Description */}\n        <div>\n          <label className=\"block text-sm font-semibold mb-2 text-gray-900\">Description *</label>\n          <textarea\n            value={description}\n            onChange={(e) => setDescription(e.target.value.slice(0, 200))}\n            placeholder=\"Describe what you see. What's the issue? What's the impact?\"\n            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n            rows={4}\n          />\n          <p className=\"text-xs text-gray-500 mt-1 text-right\">{description.length}/200 characters</p>\n        </div>\n\n        {/* Photo */}\n        <div>\n          <label className=\"block text-sm font-semibold mb-2 text-gray-900\">Photo (optional)</label>\n          {photoPreview ? (\n            <div className=\"space-y-2\">\n              <img src={photoPreview} alt=\"Preview\" className=\"w-full rounded-lg object-cover max-h-48\" />\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setPhotoBase64(null);\n                  setPhotoPreview(null);\n                  if (fileInputRef.current) fileInputRef.current.value = '';\n                  if (cameraInputRef.current) cameraInputRef.current.value = '';\n                }}\n                className=\"w-full py-2 px-4 rounded-lg border border-red-300 text-red-600 hover:bg-red-50 text-sm font-semibold\"\n              >\n                Remove Photo\n              </button>\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              <button\n                type=\"button\"\n                onClick={() => cameraInputRef.current?.click()}\n                className=\"w-full py-3 px-4 rounded-lg border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center gap-2 text-sm font-semibold text-gray-700\"\n              >\n                <Camera className=\"w-5 h-5\" /> Take Photo\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => fileInputRef.current?.click()}\n                className=\"w-full py-3 px-4 rounded-lg border-2 border-gray-300 hover:border-gray-400 transition-all text-sm font-semibold text-gray-700\"\n              >\n                Choose from Gallery\n              </button>\n            </div>\n          )}\n          <input ref={cameraInputRef} type=\"file\" accept=\"image/*\" capture onChange={handlePhotoCapture} className=\"hidden\" />\n          <input ref={fileInputRef} type=\"file\" accept=\"image/*\" onChange={handlePhotoCapture} className=\"hidden\" />\n        </div>\n\n        {/* Reporter Name */}\n        <div>\n          <label className=\"block text-sm font-semibold mb-2 text-gray-900\">Your Name (optional)</label>\n          <input\n            type=\"text\"\n            value={reporterName}\n            onChange={(e) => setReporterName(e.target.value)}\n            placeholder=\"Leave blank to be anonymous\"\n            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n          />\n        </div>\n\n        {/* Error message */}\n        {submitError && (\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-3 flex gap-3\">\n            <AlertTriangle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n            <p className=\"text-sm text-red-700\">{submitError}</p>\n          </div>\n        )}\n\n        {/* Submit button */}\n        <button\n          type=\"submit\"\n          disabled={isSubmitting || !location || !category || !severity || !description.trim()}\n          className=\"w-full py-4 px-4 rounded-2xl font-semibold text-white transition-all active:scale-95 disabled:opacity-50 sticky bottom-0 mt-6\"\n          style={{ backgroundColor: 'var(--peep-primary)' }}\n        >\n          {isSubmitting ? 'Submitting...' : 'Submit Report'}\n        </button>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}