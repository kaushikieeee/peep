module.exports=[87,a=>{"use strict";var b=a.i(66556),c=a.i(95820),d=a.i(19887),e=a.i(30843),f=a.i(6481);let g=(0,f.default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),h=(0,f.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var i=a.i(26708),j=a.i(14910),k=a.i(41727),l=a.i(15443),m=a.i(44542),n=a.i(36374);function o({provider:a,onClose:d,onSave:e,isNew:f}){let[g,h]=(0,c.useState)(a||{id:Math.random(),name:"",service:"",rating:4.5,reviews:0,estimate:"₹0",specialties:[],responseTime:"",availability:"",email:"",phone:"",location:"",experience:0,certification:"",insurance:!1,portfolio:"",successRate:0}),[j,k]=(0,c.useState)(!1),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),s=(a,b)=>{h(c=>({...c,[a]:b}))},t=()=>{q.trim()&&(h(a=>({...a,specialties:[...a.specialties,q.trim()]})),r(""))},u=async b=>{b.preventDefault(),k(!0),p("");try{if(f)await (0,n.createProvider)(g);else{let b=a?.rowIndex||2;await (0,n.updateProvider)(g,b)}e(),d()}catch(a){p(a instanceof Error?a.message:"Failed to save provider")}finally{k(!1)}},v=async()=>{if(confirm("Are you sure you want to delete this provider?")){k(!0),p("");try{let b=a?.rowIndex||2;await (0,n.deleteProvider)(b),e(),d()}catch(a){p(a instanceof Error?a.message:"Failed to delete provider")}finally{k(!1)}}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg max-w-2xl w-full max-h-96 overflow-y-auto",children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:f?"Add New Provider":"Edit Provider"}),(0,b.jsx)("button",{onClick:d,className:"text-gray-500 hover:text-gray-700",children:(0,b.jsx)(l.X,{size:24})})]}),(0,b.jsxs)("form",{onSubmit:u,className:"p-6 space-y-6",children:[o&&(0,b.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:o}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),(0,b.jsx)("input",{type:"text",value:g.name,onChange:a=>s("name",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service *"}),(0,b.jsx)("input",{type:"text",value:g.service,onChange:a=>s("service",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),(0,b.jsx)("input",{type:"number",step:"0.1",min:"0",max:"5",value:g.rating,onChange:a=>s("rating",parseFloat(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reviews"}),(0,b.jsx)("input",{type:"number",value:g.reviews,onChange:a=>s("reviews",parseInt(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimate"}),(0,b.jsx)("input",{type:"text",value:g.estimate,onChange:a=>s("estimate",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,b.jsx)("input",{type:"email",value:g.email,onChange:a=>s("email",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),(0,b.jsx)("input",{type:"tel",value:g.phone,onChange:a=>s("phone",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),(0,b.jsx)("input",{type:"text",value:g.location,onChange:a=>s("location",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Experience (years)"}),(0,b.jsx)("input",{type:"number",value:g.experience,onChange:a=>s("experience",parseInt(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Certification"}),(0,b.jsx)("input",{type:"text",value:g.certification,onChange:a=>s("certification",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Success Rate (%)"}),(0,b.jsx)("input",{type:"number",step:"0.1",min:"0",max:"100",value:g.successRate,onChange:a=>s("successRate",parseFloat(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Response Time"}),(0,b.jsx)("input",{type:"text",value:g.responseTime,onChange:a=>s("responseTime",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Availability"}),(0,b.jsx)("input",{type:"text",value:g.availability,onChange:a=>s("availability",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Portfolio"}),(0,b.jsx)("input",{type:"url",value:g.portfolio,onChange:a=>s("portfolio",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Insurance"}),(0,b.jsx)("input",{type:"checkbox",checked:g.insurance,onChange:a=>s("insurance",a.target.checked),className:"w-4 h-4"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Specialties"}),(0,b.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,b.jsx)("input",{type:"text",value:q,onChange:a=>r(a.target.value),onKeyPress:a=>"Enter"===a.key&&t(),placeholder:"Add specialty...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,b.jsx)("button",{type:"button",onClick:t,className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:(0,b.jsx)(i.Plus,{size:20})})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:g.specialties.map((a,c)=>(0,b.jsxs)("span",{className:"px-3 py-1 bg-gray-200 text-gray-800 rounded-full text-sm flex items-center gap-2",children:[a,(0,b.jsx)("button",{type:"button",onClick:()=>{h(a=>({...a,specialties:a.specialties.filter((a,b)=>b!==c)}))},className:"text-red-600 hover:text-red-800",children:(0,b.jsx)(l.X,{size:16})})]},c))})]}),(0,b.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-between gap-2 -mx-6 -mb-6",children:[(0,b.jsx)("div",{children:!f&&(0,b.jsxs)("button",{type:"button",onClick:v,disabled:j,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",children:[(0,b.jsx)(m.Trash2,{size:18}),"Delete"]})}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:d,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:j,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:j?"Saving...":"Save"})]})]})]})]})})}function p({problem:a,onClose:d,onSave:e,isNew:f}){let[g,h]=(0,c.useState)(a||{id:`P${Date.now()}`,title:"",location:"",latitude:void 0,longitude:void 0,severity:"Medium",category:"",description:"",reportedBy:"",reportedDate:new Date().toISOString().split("T")[0],status:"Open",priority:"Medium",estimatedCost:"",deadline:"",images:[],tags:[]}),[j,k]=(0,c.useState)(!1),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),u=(a,b)=>{h(c=>({...c,[a]:b}))},v=()=>{q.trim()&&(h(a=>({...a,tags:[...a.tags||[],q.trim()]})),r(""))},w=()=>{s.trim()&&(h(a=>({...a,images:[...a.images||[],s.trim()]})),t(""))},x=async b=>{b.preventDefault(),k(!0),p("");try{if(f)await (0,n.createProblem)(g);else{let b=a?.rowIndex||2;await (0,n.updateProblem)(g,b)}e(),d()}catch(a){p(a instanceof Error?a.message:"Failed to save problem")}finally{k(!1)}},y=async()=>{if(confirm("Are you sure you want to delete this problem?")){k(!0),p("");try{let b=a?.rowIndex||2;await (0,n.deleteProblem)(b),e(),d()}catch(a){p(a instanceof Error?a.message:"Failed to delete problem")}finally{k(!1)}}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg max-w-2xl w-full max-h-96 overflow-y-auto",children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:f?"Add New Problem":"Edit Problem"}),(0,b.jsx)("button",{onClick:d,className:"text-gray-500 hover:text-gray-700",children:(0,b.jsx)(l.X,{size:24})})]}),(0,b.jsxs)("form",{onSubmit:x,className:"p-6 space-y-6",children:[o&&(0,b.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:o}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,b.jsx)("input",{type:"text",value:g.title,onChange:a=>u("title",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),(0,b.jsx)("input",{type:"text",value:g.location,onChange:a=>u("location",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),(0,b.jsx)("input",{type:"text",value:g.category,onChange:a=>u("category",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Severity *"}),(0,b.jsxs)("select",{value:g.severity,onChange:a=>u("severity",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"Low",children:"Low"}),(0,b.jsx)("option",{value:"Medium",children:"Medium"}),(0,b.jsx)("option",{value:"High",children:"High"}),(0,b.jsx)("option",{value:"Critical",children:"Critical"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,b.jsxs)("select",{value:g.priority,onChange:a=>u("priority",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"Low",children:"Low"}),(0,b.jsx)("option",{value:"Medium",children:"Medium"}),(0,b.jsx)("option",{value:"High",children:"High"}),(0,b.jsx)("option",{value:"Critical",children:"Critical"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,b.jsxs)("select",{value:g.status,onChange:a=>u("status",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"Open",children:"Open"}),(0,b.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,b.jsx)("option",{value:"Resolved",children:"Resolved"}),(0,b.jsx)("option",{value:"Pending",children:"Pending"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reported By"}),(0,b.jsx)("input",{type:"text",value:g.reportedBy,onChange:a=>u("reportedBy",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reported Date"}),(0,b.jsx)("input",{type:"date",value:g.reportedDate,onChange:a=>u("reportedDate",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Latitude"}),(0,b.jsx)("input",{type:"number",step:"0.0001",value:g.latitude||"",onChange:a=>u("latitude",a.target.value?parseFloat(a.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Longitude"}),(0,b.jsx)("input",{type:"number",step:"0.0001",value:g.longitude||"",onChange:a=>u("longitude",a.target.value?parseFloat(a.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Cost"}),(0,b.jsx)("input",{type:"text",value:g.estimatedCost,onChange:a=>u("estimatedCost",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deadline"}),(0,b.jsx)("input",{type:"date",value:g.deadline,onChange:a=>u("deadline",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,b.jsx)("textarea",{value:g.description,onChange:a=>u("description",a.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Tags"}),(0,b.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,b.jsx)("input",{type:"text",value:q,onChange:a=>r(a.target.value),onKeyPress:a=>"Enter"===a.key&&v(),placeholder:"Add tag...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,b.jsx)("button",{type:"button",onClick:v,className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:(0,b.jsx)(i.Plus,{size:20})})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:g.tags?.map((a,c)=>(0,b.jsxs)("span",{className:"px-3 py-1 bg-gray-200 text-gray-800 rounded-full text-sm flex items-center gap-2",children:[a,(0,b.jsx)("button",{type:"button",onClick:()=>{h(a=>({...a,tags:a.tags?.filter((a,b)=>b!==c)||[]}))},className:"text-red-600 hover:text-red-800",children:(0,b.jsx)(l.X,{size:16})})]},c))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Image URLs"}),(0,b.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,b.jsx)("input",{type:"url",value:s,onChange:a=>t(a.target.value),onKeyPress:a=>"Enter"===a.key&&w(),placeholder:"Add image URL...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,b.jsx)("button",{type:"button",onClick:w,className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:(0,b.jsx)(i.Plus,{size:20})})]}),(0,b.jsx)("div",{className:"space-y-2",children:g.images?.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-100 rounded-lg text-sm",children:[(0,b.jsx)("span",{className:"text-gray-700 truncate",children:a}),(0,b.jsx)("button",{type:"button",onClick:()=>{h(a=>({...a,images:a.images?.filter((a,b)=>b!==c)||[]}))},className:"text-red-600 hover:text-red-800",children:(0,b.jsx)(l.X,{size:18})})]},c))})]}),(0,b.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-between gap-2 -mx-6 -mb-6",children:[(0,b.jsx)("div",{children:!f&&(0,b.jsxs)("button",{type:"button",onClick:y,disabled:j,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",children:[(0,b.jsx)(m.Trash2,{size:18}),"Delete"]})}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:d,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:j,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:j?"Saving...":"Save"})]})]})]})]})})}async function q(){try{let a=await fetch("/api/providers",{cache:"no-store"});if(!a.ok)return console.warn("Failed to fetch providers from API:",a.status),s();let b=await a.json();if(!b||0===b.length)return s();return console.log(`✓ Fetched ${b.length} providers`),b}catch(a){return console.error("Error fetching providers:",a),s()}}async function r(){try{let a=await fetch("/api/problems",{cache:"no-store"});if(!a.ok)return console.warn("Failed to fetch problems from API:",a.status),t();let b=await a.json();if(!b||0===b.length)return t();return console.log(`✓ Fetched ${b.length} problems`),b}catch(a){return console.error("Error fetching problems:",a),t()}}function s(){return[{id:1,name:"GreenFix Turfcare",service:"Turf restoration & cleanup",rating:4.8,reviews:124,estimate:"₹2,05,000 - ₹4,10,000",specialties:["Turf restoration","Soil remediation","Land cleanup"],responseTime:"2-4 hours",availability:"Mon-Sat, 7AM-6PM",email:"contact@greenfixturfcare.com",phone:"+91-9876543210",location:"Bangalore, India",experience:12,certification:"ISO 14001",insurance:!0,portfolio:"greenfixportfolio.com",successRate:96.5},{id:2,name:"DrainWell Solutions",service:"Water drainage & treatment",rating:4.6,reviews:87,estimate:"₹1,23,000 - ₹2,87,000",specialties:["Water treatment","Drainage systems","Stagnant water"],responseTime:"4-6 hours",availability:"24/7 Emergency",email:"support@drainwell.com",phone:"+91-9876543211",location:"Bangalore, India",experience:8,certification:"Water Management Expert",insurance:!0,portfolio:"drainwellsolutions.com",successRate:94.2},{id:3,name:"CleanSoil Labs",service:"Soil testing & remediation",rating:4.9,reviews:156,estimate:"₹2,46,000 - ₹6,56,000",specialties:["Soil analysis","Contamination testing","Remediation"],responseTime:"1-2 hours",availability:"Mon-Sun, 8AM-8PM",email:"labs@cleansoil.com",phone:"+91-9876543212",location:"Bangalore, India",experience:15,certification:"NABL Accredited",insurance:!0,portfolio:"cleansoillabs.com",successRate:98.1}]}function t(){return[{id:"P001",title:"Stagnant water at Market Street",location:"Market Street, Downtown",latitude:11.042,longitude:77.0269,severity:"High",category:"Water Pollution",description:"Accumulation of stagnant water causing mosquito breeding and foul odors",reportedBy:"John Doe",reportedDate:"2025-11-10",status:"Open",priority:"High",estimatedCost:"₹1,50,000",deadline:"2025-11-25",images:[],tags:["water","urgent","health-hazard"]},{id:"P002",title:"Soil contamination near Industrial Zone",location:"Industrial Area, East Side",latitude:11.05,longitude:77.04,severity:"High",category:"Soil Pollution",description:"Heavy metal contamination detected in soil samples",reportedBy:"Environmental Officer",reportedDate:"2025-11-08",status:"In Progress",priority:"Critical",estimatedCost:"₹4,50,000",deadline:"2025-12-15",images:[],tags:["soil","chemical","industrial"]},{id:"P003",title:"Air quality degradation at Main Road",location:"Main Road Junction",latitude:11.035,longitude:77.02,severity:"Medium",category:"Air Pollution",description:"High vehicle emission causing poor air quality readings",reportedBy:"Resident",reportedDate:"2025-11-12",status:"Open",priority:"Medium",estimatedCost:"₹2,00,000",deadline:"2025-12-01",images:[],tags:["air","traffic","emission"]},{id:"P004",title:"Plastic waste accumulation in Park",location:"Central Park",latitude:11.045,longitude:77.03,severity:"Medium",category:"Waste Pollution",description:"Large quantities of plastic waste scattered throughout the park area",reportedBy:"Park Administrator",reportedDate:"2025-11-09",status:"In Progress",priority:"High",estimatedCost:"₹80,000",deadline:"2025-11-20",images:[],tags:["waste","plastic","cleanup"]},{id:"P005",title:"Heavy metal residue at Abandoned Factory",location:"Old Industrial Factory",latitude:11.055,longitude:77.035,severity:"High",category:"Chemical Pollution",description:"Toxic chemical residue from factory operations affecting surrounding area",reportedBy:"Environmental Inspector",reportedDate:"2025-11-07",status:"Open",priority:"Critical",estimatedCost:"₹7,50,000",deadline:"2025-12-31",images:[],tags:["chemical","toxic","factory"]}]}var u=a.i(95093);function v(){let a=(0,d.useRouter)();(0,u.useAdminAuth)();let[f,l]=(0,c.useState)([]),[m,n]=(0,c.useState)([]),[s,t]=(0,c.useState)(!0),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)("providers");(0,c.useEffect)(()=>{H()},[]);let H=async()=>{try{t(!0);let[a,b]=await Promise.all([q(),r()]);l(a),n(b)}catch(a){console.error("Error loading data:",a)}finally{t(!1)}},I=()=>{H()};return(0,b.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,b.jsx)(k.default,{open:!0,onClose:()=>{}}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center justify-between sticky top-0 z-20",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Panel"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("button",{onClick:H,disabled:s,className:"flex items-center gap-2 px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all disabled:opacity-50",title:"Refresh data from Google Sheets",children:[(0,b.jsx)(h,{className:`w-5 h-5 ${s?"animate-spin":""}`}),"Refresh"]}),(0,b.jsxs)("button",{onClick:()=>{(0,u.clearAdminSession)(),a.push("/admin/login")},className:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",children:[(0,b.jsx)(e.LogOut,{className:"w-5 h-5"}),"Logout"]})]})]}),s&&(0,b.jsxs)("div",{className:"bg-blue-50 border-b border-blue-200 px-6 py-3 flex items-center gap-3 text-blue-700",children:[(0,b.jsx)(h,{size:20,className:"animate-spin flex-shrink-0"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Loading data from Google Sheets..."})]}),(0,b.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 flex gap-8",children:[(0,b.jsxs)("button",{onClick:()=>G("providers"),className:`py-4 px-2 font-medium border-b-2 transition-all ${"providers"===F?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["Service Providers (",f.length,")"]}),(0,b.jsxs)("button",{onClick:()=>G("problems"),className:`py-4 px-2 font-medium border-b-2 transition-all ${"problems"===F?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["Pollution Problems (",m.length,")"]})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-auto p-6",children:["providers"===F&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Service Providers"}),(0,b.jsxs)("button",{onClick:()=>{C(null),y(!0)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all",children:[(0,b.jsx)(i.Plus,{size:20}),"Add Provider"]})]}),0===f.length?(0,b.jsx)("div",{className:"text-center py-12 text-gray-500",children:(0,b.jsx)("p",{children:"No providers found. Create one to get started."})}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map((a,c)=>(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-lg transition-all",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.service})]}),(0,b.jsx)("button",{onClick:()=>{C(a),y(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",children:(0,b.jsx)(j.Edit2,{size:18})})]}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g,{className:"w-4 h-4 text-yellow-500"}),(0,b.jsx)("span",{className:"font-medium",children:a.rating}),(0,b.jsxs)("span",{className:"text-gray-600",children:["(",a.reviews," reviews)"]})]}),(0,b.jsxs)("p",{className:"text-gray-700",children:[(0,b.jsx)("span",{className:"font-medium",children:"Est. Cost:"})," ",a.estimate]}),a.email&&(0,b.jsxs)("p",{className:"text-gray-700",children:[(0,b.jsx)("span",{className:"font-medium",children:"Email:"})," ",a.email]}),a.phone&&(0,b.jsxs)("p",{className:"text-gray-700",children:[(0,b.jsx)("span",{className:"font-medium",children:"Phone:"})," ",a.phone]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:a.specialties?.slice(0,2).map(a=>(0,b.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700",children:a},a))})]})]},c))})]}),"problems"===F&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Pollution Problems"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Problems are created by escalating unresolved evidence items"})]})}),0===m.length?(0,b.jsx)("div",{className:"text-center py-12 text-gray-500",children:(0,b.jsx)("p",{children:"No problems yet. Escalate unresolved evidence to create problems."})}):(0,b.jsx)("div",{className:"space-y-3",children:m.map((a,c)=>(0,b.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-lg transition-all",children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900",children:a.title}),(0,b.jsx)("span",{className:`text-xs font-bold px-3 py-1 rounded ${"Critical"===a.severity?"bg-red-100 text-red-700":"High"===a.severity?"bg-orange-100 text-orange-700":"Medium"===a.severity?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:a.severity})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:a.location}),a.description&&(0,b.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:a.description}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[a.category&&(0,b.jsxs)("span",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Category:"})," ",a.category]}),a.status&&(0,b.jsxs)("span",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Status:"})," ",a.status]}),a.reportedBy&&(0,b.jsxs)("span",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Reported by:"})," ",a.reportedBy]})]}),a.tags&&a.tags.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-1 mt-3",children:a.tags.map(a=>(0,b.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-100 text-purple-700",children:a},a))})]}),(0,b.jsx)("button",{onClick:()=>{E(a),A(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition flex-shrink-0",children:(0,b.jsx)(j.Edit2,{size:18})})]})},c))})]})]})]}),x&&(0,b.jsx)(o,{provider:B||void 0,onClose:()=>{y(!1),C(null)},onSave:I,isNew:!B}),z&&(0,b.jsx)(p,{problem:D||void 0,onClose:()=>{A(!1),E(null)},onSave:I,isNew:!D})]})}a.s(["default",()=>v],87)}];

//# sourceMappingURL=Downloads_code_app_admin_marketplace_page_tsx_412c2f05._.js.map