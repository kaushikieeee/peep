module.exports=[94865,a=>{"use strict";var b=a.i(66556),c=a.i(95820),d=a.i(27111),e=a.i(8522),f=a.i(67186),g=a.i(6721),h=a.i(51011),i=a.i(11271);let j=[{name:"School Gate",lat:12.9716,lng:77.5946,zone:"Zone P1"},{name:"Park North",lat:12.974,lng:77.5955,zone:"Zone W2"},{name:"Sports Field",lat:12.9705,lng:77.5935,zone:"Zone P2"},{name:"Drainage Area",lat:12.9719,lng:77.595,zone:"Zone P1"},{name:"Construction Site",lat:12.9715,lng:77.5965,zone:"Zone C3"},{name:"Residential Corner",lat:12.971,lng:77.592,zone:"Zone W3"},{name:"Industrial Zone",lat:12.9745,lng:77.5945,zone:"Zone S1"},{name:"Local Market",lat:12.9695,lng:77.5955,zone:"Zone P3"},{name:"Park South",lat:12.9735,lng:77.593,zone:"Zone O1"},{name:"Walking Trail",lat:12.9725,lng:77.5938,zone:"Zone C2"}];function k(){let[a,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(j),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)("location"),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)("Medium"),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)(!0),[P,Q]=(0,c.useState)([]),[R,S]=(0,c.useState)(""),[T,U]=(0,c.useState)(!0),[V,W]=(0,c.useState)(null);(0,c.useEffect)(()=>{console.log("[MapPage] Fetching reports from API..."),fetch("/api/data/reports").then(a=>a.json()).then(a=>{console.log("[MapPage] Loaded reports:",a.length),k(a)}).catch(a=>console.error("[MapPage] Failed to load data:",a))},[]),(0,c.useEffect)(()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(a=>{let b={lat:a.coords.latitude,lng:a.coords.longitude};o(b),y({...b,label:"Current Location"})},a=>{q("Can't access your location. Type a place name or drag the pin.")})},[]),(0,c.useEffect)(()=>{z.trim()?C((0,i.fuzzySearch)(z,l)):C([])},[z,l]);let X=null!==x,Y=D.trim().length>=5&&F.trim().length>0&&H&&null!==L;return(0,b.jsxs)("div",{className:"fixed top-0 left-0 right-0 bottom-0 bg-white flex flex-col",children:[(0,b.jsx)("div",{className:"z-30 bg-white border-b border-gray-200 px-4 py-3 flex-shrink-0",children:(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-xl font-bold text-balance",style:{color:"var(--peep-primary)"},children:[(0,b.jsx)("span",{className:"sr-only",children:"PEEP - "}),"Pollution Map"]}),(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"View reports near you • No reports nearby? Be the first to PEEP!"})]})})}),(0,b.jsxs)("div",{className:"absolute top-14 left-0 right-0 bottom-0",children:[(0,b.jsx)(h.default,{pins:a.map(a=>({id:a.id,lat:a.lat,lng:a.lng,category:a.category,severity:a.severity,note:a.note})),onPinClick:b=>{s(a.find(a=>a.id===b.id)||null)}}),r&&(0,b.jsxs)("div",{className:"absolute bottom-20 left-4 right-4 bg-white rounded-lg border border-gray-200 shadow-lg p-4 max-w-sm z-50",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,b.jsxs)("h3",{className:"text-sm font-bold",children:["Case #",r.id]}),(0,b.jsx)("button",{onClick:()=>s(null),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:r.category}),(0,b.jsx)("p",{className:"text-sm text-gray-700 mb-3",children:r.note}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("span",{className:"px-2 py-1 rounded text-xs font-bold",style:{backgroundColor:"High"===r.severity?"#fca5a5":"Medium"===r.severity?"#fcd34d":"#c6f6d5",color:"High"===r.severity?"#7f1d1d":"Medium"===r.severity?"#78350f":"#15803d"},children:r.severity}),(0,b.jsxs)("span",{className:"text-xs text-gray-500",children:["By ",r.reporter]})]})]})]}),(0,b.jsx)("div",{className:`fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-3 z-40 transition-all duration-300 ${t?"translate-y-full":"translate-y-0"}`,children:(0,b.jsx)("button",{onClick:()=>u(!0),className:"w-full py-3 px-6 rounded-2xl font-bold text-white shadow-lg transition-all active:scale-95",style:{backgroundColor:"var(--peep-primary)"},"aria-label":"Start a new pollution report",children:"Start Report"})}),(0,b.jsxs)("div",{className:`fixed bottom-0 left-0 right-0 top-0 bg-white border-t border-gray-200 rounded-t-2xl transition-all duration-300 z-[9999] max-h-screen overflow-y-auto ${t?"translate-y-0":"translate-y-full"}`,children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-white px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex-1 text-center",children:(0,b.jsxs)("div",{className:"text-xs font-bold text-gray-500 tracking-wide",children:["STEP ","location"===v?"1":"details"===v?"2":"impact"===v?"3":"✓"," OF 3"]})}),(0,b.jsx)("button",{onClick:()=>{"location"===v?u(!1):w("details"===v?"location":"impact"===v?"details":"impact")},className:"p-1 hover:bg-gray-100 rounded-lg","aria-label":"Collapse sheet",children:(0,b.jsx)(e.ChevronUp,{className:"w-5 h-5"})})]}),(0,b.jsx)("div",{className:"px-4 pt-4",children:(0,b.jsx)("div",{className:"flex gap-2",children:["location","details","impact"].map((a,c)=>(0,b.jsx)("div",{className:"flex-1 h-1 rounded-full",style:{backgroundColor:"location"===a?"location"===v||"details"===v||"impact"===v?"var(--peep-primary)":"#ddd":"details"===a?"details"===v||"impact"===v?"var(--peep-primary)":"#ddd":"impact"===v?"var(--peep-primary)":"#ddd"}},a))})}),(0,b.jsx)("div",{className:"p-4 pb-8",children:"success"===v?(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto bg-green-100",children:(0,b.jsx)(f.Check,{className:"w-8 h-8 text-green-600"})}),(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Report Submitted"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Case #",V]}),(0,b.jsx)("div",{className:"flex gap-2 pt-4",children:(0,b.jsxs)("button",{onClick:()=>{u(!1),w("location"),E(""),G(""),I(""),Q([])},className:"flex-1 py-3 px-4 rounded-lg font-semibold text-white transition-all active:scale-95",style:{backgroundColor:"var(--peep-primary)"},children:[(0,b.jsx)(g.Share2,{className:"w-4 h-4 inline mr-2"}),"Share"]})})]}):"location"===v?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-gray-900 mb-3",children:"Step 1: Choose Location"}),p&&(0,b.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-3 flex gap-2",children:[(0,b.jsx)(d.AlertCircle,{className:"w-5 h-5 text-yellow-600 flex-shrink-0"}),(0,b.jsx)("p",{className:"text-sm text-yellow-800",children:p})]}),n&&(0,b.jsxs)("button",{onClick:()=>y({...n,label:"Current Location"}),className:"w-full p-3 border-2 rounded-lg text-left transition-all mb-3",style:{borderColor:x?.label==="Current Location"?"var(--peep-primary)":"#ddd",backgroundColor:x?.label==="Current Location"?"rgba(0, 128, 96, 0.05)":"transparent"},children:[(0,b.jsx)("p",{className:"font-medium text-sm text-gray-900",children:"Use My Current Location"}),(0,b.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Lat: ",n.lat.toFixed(4),", Lng: ",n.lng.toFixed(4)]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",placeholder:"Type location name or street",value:z,onChange:a=>A(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2",style:{outlineColor:"var(--peep-primary)"},"aria-label":"Search for location"}),B.length>0&&(0,b.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-50",children:B.map(a=>(0,b.jsxs)("button",{onClick:()=>{y({lat:a.lat,lng:a.lng,label:a.name}),A(""),C([])},className:"w-full text-left px-3 py-2 hover:bg-gray-50 text-sm border-b border-gray-100 last:border-0",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:a.zone})]},`${a.lat}-${a.lng}`))})]})]}),x&&(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-xs font-bold text-gray-600 uppercase tracking-wide",children:"Selected Location"}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 mt-1",children:x.label}),(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:["Lat: ",x.lat.toFixed(4),", Lng: ",x.lng.toFixed(4)]})]}),(0,b.jsx)("p",{className:"text-xs text-gray-600 text-center",children:"Location is required so authorities can find the spot."}),(0,b.jsx)("button",{onClick:()=>X&&w("details"),disabled:!X,className:"w-full py-3 px-4 rounded-lg font-semibold text-white transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--peep-primary)"},children:"Next: Add Details"})]}):"details"===v?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-bold text-gray-900",children:"Step 2: Title, Description & Category"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-900",children:"Clear Title *"}),(0,b.jsx)("input",{type:"text",placeholder:"e.g., Blackish runoff behind school gate",value:D,onChange:a=>E(a.target.value),maxLength:100,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2","aria-label":"Report title"}),(0,b.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:[D.length,"/100 characters"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-900",children:"Description *"}),(0,b.jsx)("textarea",{placeholder:"Describe what you see in one line. Add detail about when you saw it, how often, who is affected.",value:F,onChange:a=>G(a.target.value),maxLength:500,rows:3,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2","aria-label":"Report description"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-900",children:"Category *"}),(0,b.jsxs)("select",{value:H,onChange:a=>I(a.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2","aria-label":"Problem category",children:[(0,b.jsx)("option",{value:"",children:"Select category..."}),(0,b.jsx)("option",{value:"Soil contamination",children:"Soil contamination"}),(0,b.jsx)("option",{value:"Stagnant water",children:"Stagnant water"}),(0,b.jsx)("option",{value:"Plastic / microplastics",children:"Plastic / microplastics"}),(0,b.jsx)("option",{value:"Damaged turf / turf runoff",children:"Damaged turf / turf runoff"}),(0,b.jsx)("option",{value:"Waste dumping",children:"Waste dumping"}),(0,b.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-900 block mb-3",children:"How bad is it? *"}),(0,b.jsx)("div",{className:"flex gap-2",children:["Low","Medium","High"].map(a=>(0,b.jsx)("button",{onClick:()=>K(a),className:"flex-1 py-2 px-3 rounded-lg font-semibold text-sm transition-all",style:{backgroundColor:J===a?"High"===a?"#ef4444":"Medium"===a?"#eab308":"#22c55e":"#f3f4f6",color:J===a?"white":"#666"},children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-900 block mb-2",children:"Attach Photo *"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("label",{className:"flex-1 px-3 py-2 border-2 border-dashed border-gray-300 rounded-lg text-center cursor-pointer hover:border-gray-400 transition-all",children:[(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:a=>M(a.target.files?.[0]||null),className:"hidden","aria-label":"Upload photo from gallery"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:L?"✓ Photo selected":"Gallery"})]}),(0,b.jsxs)("label",{className:"flex-1 px-3 py-2 border-2 border-dashed border-gray-300 rounded-lg text-center cursor-pointer hover:border-gray-400 transition-all",children:[(0,b.jsx)("input",{type:"file",accept:"image/*",capture:"environment",onChange:a=>M(a.target.files?.[0]||null),className:"hidden","aria-label":"Take photo with camera"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Camera"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("button",{onClick:()=>w("location"),className:"flex-1 py-2 px-4 rounded-lg font-medium border border-gray-300 text-gray-700 hover:bg-gray-50",children:"Back"}),(0,b.jsx)("button",{onClick:()=>Y&&w("impact"),disabled:!Y,className:"flex-1 py-2 px-4 rounded-lg font-medium text-white transition-all active:scale-95 disabled:opacity-50",style:{backgroundColor:"var(--peep-primary)"},children:"Next: Impact"})]})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-bold text-gray-900",children:"Step 3: Who's Affected?"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"How could this affect people?"}),(0,b.jsx)("div",{className:"space-y-2",children:[{id:"health",label:"Health (respiratory / skin)",hint:"Respiratory or skin irritation risk"},{id:"mosquito",label:"Mosquito / vector risk",hint:"Breeding ground for disease vectors"},{id:"safety",label:"Safety (slippery surfaces)",hint:"Risk of falls or accidents"},{id:"kids",label:"Play & sports risk for kids",hint:"Children playing nearby"},{id:"water",label:"Contaminated water source",hint:"Downstream water pollution"}].map(a=>(0,b.jsxs)("label",{className:"flex items-start gap-2 p-2 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,b.jsx)("input",{type:"checkbox",checked:P.includes(a.id),onChange:()=>{var b;return b=a.id,void Q(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])},className:"mt-1 w-4 h-4"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.label}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:a.hint})]})]},a.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-900 block mb-2",children:"Who is affected?"}),(0,b.jsxs)("select",{value:R,onChange:a=>S(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2",children:[(0,b.jsx)("option",{value:"",children:"Choose..."}),(0,b.jsx)("option",{value:"Children",children:"Children"}),(0,b.jsx)("option",{value:"Residents",children:"Residents"}),(0,b.jsx)("option",{value:"Athletes",children:"Athletes"}),(0,b.jsx)("option",{value:"Everyone",children:"Everyone"}),(0,b.jsx)("option",{value:"Not sure",children:"Not sure"})]})]}),(0,b.jsxs)("label",{className:"flex items-start gap-2 p-2 border border-gray-200 rounded-lg",children:[(0,b.jsx)("input",{type:"checkbox",checked:T,onChange:a=>U(a.target.checked),className:"mt-1 w-4 h-4"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Share photo publicly"}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Make your photo visible to others viewing this report."})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,b.jsx)("button",{onClick:()=>w("details"),className:"flex-1 py-2 px-4 rounded-lg font-medium border border-gray-300 text-gray-700 hover:bg-gray-50",children:"Back"}),(0,b.jsx)("button",{onClick:()=>{let b=Math.max(...a.map(a=>a.id),100)+1;W(b),w("success"),console.log("[v0] Report submitted:",{caseId:b,title:D,location:x,category:H,severity:J,impacts:P,affectedPeople:R,sharePublicly:T})},className:"flex-1 py-3 px-4 rounded-lg font-semibold text-white transition-all active:scale-95",style:{backgroundColor:"var(--peep-primary)"},children:"Submit Report"})]})]})})]})]})}a.s(["default",()=>k])}];

//# sourceMappingURL=Downloads_code_app_peep_user_map_page_tsx_ac14c409._.js.map