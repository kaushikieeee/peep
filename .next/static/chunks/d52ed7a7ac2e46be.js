(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,85945,e=>{"use strict";let t=(0,e.i(77735).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],85945)},52964,e=>{"use strict";let t=(0,e.i(77735).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],52964)},87654,e=>{"use strict";function t(e,t){if(!e.trim())return t;let a=e.toLowerCase();return t.filter(e=>e.name.toLowerCase().includes(a)).sort((e,t)=>e.name.toLowerCase().indexOf(a)-t.name.toLowerCase().indexOf(a)).slice(0,5)}e.s(["fuzzySearch",()=>t])},48663,e=>{"use strict";var t=e.i(122),a=e.i(45471),l=e.i(85945),s=e.i(3407),r=e.i(52964);let o=(0,e.i(77735).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var n=e.i(37213),i=e.i(69257),c=e.i(87654);let d=[{name:"School Gate",lat:12.9716,lng:77.5946,zone:"Zone P1"},{name:"Park North",lat:12.974,lng:77.5955,zone:"Zone W2"},{name:"Sports Field",lat:12.9705,lng:77.5935,zone:"Zone P2"},{name:"Drainage Area",lat:12.9719,lng:77.595,zone:"Zone P1"},{name:"Construction Site",lat:12.9715,lng:77.5965,zone:"Zone C3"},{name:"Residential Corner",lat:12.971,lng:77.592,zone:"Zone W3"},{name:"Industrial Zone",lat:12.9745,lng:77.5945,zone:"Zone S1"},{name:"Local Market",lat:12.9695,lng:77.5955,zone:"Zone P3"},{name:"Park South",lat:12.9735,lng:77.593,zone:"Zone O1"},{name:"Walking Trail",lat:12.9725,lng:77.5938,zone:"Zone C2"}];function x(){let[e,x]=(0,a.useState)(null),[m,p]=(0,a.useState)(null),[u,g]=(0,a.useState)(!0),[h,y]=(0,a.useState)(!1),[f,b]=(0,a.useState)(""),[j,N]=(0,a.useState)([]);(0,a.useEffect)(()=>{h?g(!1):"geolocation"in navigator?navigator.geolocation.getCurrentPosition(e=>{let{latitude:t,longitude:a}=e.coords;x({lat:t,lng:a}),sessionStorage.setItem("peep-report-location",JSON.stringify({lat:t,lng:a})),g(!1)},e=>{console.log("[v0] Geolocation error:",e.message),p("Unable to access your location. Please enable location permissions."),g(!1)}):(p("Geolocation is not supported by your browser."),g(!1))},[h]),(0,a.useEffect)(()=>{f.trim()?N((0,c.fuzzySearch)(f,d)):N([])},[f]);let v=e=>{x({lat:e.lat,lng:e.lng}),sessionStorage.setItem("peep-report-location",JSON.stringify({lat:e.lat,lng:e.lng})),b(""),N([]),y(!1)};return(0,t.jsxs)("div",{className:"min-h-screen bg-white flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,t.jsx)(i.default,{href:"/peep/user",className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,t.jsx)(l.ChevronLeft,{className:"w-5 h-5"})}),(0,t.jsx)("h1",{className:"text-lg font-semibold",children:"New Report"}),(0,t.jsx)("div",{className:"w-10"})]}),(0,t.jsx)("div",{className:"flex-1 px-4 py-8 flex flex-col items-center justify-center",children:u&&!h?(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto animate-pulse",style:{backgroundColor:"var(--peep-primary)"},children:(0,t.jsx)(s.MapPin,{className:"w-8 h-8 text-white"})}),(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Finding your location..."}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"This helps us pinpoint where the issue is."}),(0,t.jsx)("button",{onClick:()=>y(!0),className:"text-sm font-semibold",style:{color:"var(--peep-primary)"},children:"Search location instead"})]}):m&&!h?(0,t.jsxs)("div",{className:"w-full max-w-sm text-center space-y-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto bg-red-100",children:(0,t.jsx)(r.AlertCircle,{className:"w-8 h-8 text-red-600"})}),(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Location Access Required"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:m}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Please enable location in your browser settings and refresh."}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"flex-1 py-3 px-4 rounded-lg font-semibold text-white transition-all active:scale-95",style:{backgroundColor:"var(--peep-primary)"},children:"Try Again"}),(0,t.jsx)("button",{onClick:()=>y(!0),className:"flex-1 py-3 px-4 rounded-lg font-semibold border-2",style:{borderColor:"var(--peep-primary)",color:"var(--peep-primary)"},children:"Search Instead"})]})]}):h?(0,t.jsxs)("div",{className:"w-full max-w-sm space-y-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Search Location"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 border-2 border-gray-300 rounded-lg focus-within:border-2",style:{focusWithinBorderColor:"var(--peep-primary)"},children:[(0,t.jsx)(o,{className:"w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Type location name...",value:f,onChange:e=>b(e.target.value),autoFocus:!0,className:"flex-1 outline-none text-sm"}),f&&(0,t.jsx)("button",{onClick:()=>{b(""),N([])},className:"p-1 hover:bg-gray-100 rounded",children:(0,t.jsx)(n.X,{className:"w-4 h-4 text-gray-400"})})]}),j.length>0&&(0,t.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-300 rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto",children:j.map(e=>(0,t.jsxs)("button",{onClick:()=>v(e),className:"w-full text-left px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-0 transition-colors",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-600 mt-0.5",children:e.zone})]},`${e.lat}-${e.lng}`))}),f&&0===j.length&&(0,t.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-300 rounded-lg p-4 text-center text-sm text-gray-600 z-50",children:"No locations found. Try another name."})]}),(0,t.jsxs)("div",{className:"space-y-2 text-xs text-gray-600",children:[(0,t.jsx)("p",{className:"font-semibold text-gray-700",children:"Suggested locations:"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:d.slice(0,6).map(e=>(0,t.jsxs)("button",{onClick:()=>v(e),className:"p-2 text-left rounded border border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-all",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.zone})]},`${e.lat}-${e.lng}`))})]}),(0,t.jsx)("button",{onClick:()=>{y(!1),b(""),N([]),g(!0)},className:"w-full py-3 px-4 rounded-lg font-semibold border-2 transition-all active:scale-95",style:{borderColor:"var(--peep-primary)",color:"var(--peep-primary)"},children:"Use Auto Location Instead"})]}):(0,t.jsxs)("div",{className:"w-full max-w-sm text-center space-y-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto",style:{backgroundColor:"var(--peep-primary)"},children:(0,t.jsx)(s.MapPin,{className:"w-8 h-8 text-white"})}),(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Location Captured"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Lat: ",e?.lat.toFixed(4),", Lng: ",e?.lng.toFixed(4)]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Ready to document the issue?"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.default,{href:"/peep/user/report-flow/capture-photo",className:"flex-1 py-3 px-4 rounded-lg font-semibold text-white transition-all active:scale-95",style:{backgroundColor:"var(--peep-primary)"},children:"Next: Capture Photo"}),(0,t.jsx)("button",{onClick:()=>{y(!0),x(null)},className:"flex-1 py-3 px-4 rounded-lg font-semibold border-2",style:{borderColor:"var(--peep-primary)",color:"var(--peep-primary)"},children:"Change Location"})]})]})})]})}e.s(["default",()=>x],48663)}]);